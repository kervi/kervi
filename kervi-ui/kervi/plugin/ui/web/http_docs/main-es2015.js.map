{"version":3,"sources":["D:/dev/kervi/kervi/kervi-ui/kervi/ui/web/dist/kervi-js/fesm2015/kervi-js.js","D:/dev/kervi/kervi/kervi-ui/kervi/ui/web/dist/ngx-kervi/fesm2015/ngx-kervi.js","./$_lazy_route_resource lazy namespace object","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/connect/connect.component.ts","./src/app/connect/connect.component.html","./src/app/dashboard/dashboard.component.ts","./src/app/dashboard/dashboard.component.html","./src/app/image-viewer/image-viewer.component.ts","./src/app/image-viewer/image-viewer.component.html","./src/app/image-viewer/image-viewer.config.ts","./src/app/login/login.component.ts","./src/app/login/login.component.html","./src/app/media/media.component.ts","./src/app/media/media.component.html","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwN;AACjL;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,uBAAuB,cAAc;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,iCAAiC;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kCAAkC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,mCAAmC;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,wDAAwD;AACjG;AACA,yCAAyC,6CAA6C;AACtF,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,0DAA0D;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,4CAA4C;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,wDAAwD;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,0CAA0C;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA,mFAAmF;AACnF;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,uCAAuC;AAC1E,mBAAmB;AACnB;AACA;AACA;AACA;AACA,iCAAiC,mCAAmC;AACpE,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,wDAAwD;AACjG;AACA,yCAAyC,6CAA6C;AACtF,uBAAuB;AACvB,gDAAgD,+DAA+D;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,IAAI;AACjB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,gGAAgG,KAAK;AACrJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA,mFAAmF;AACnF;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,iDAAiD;AACrF;AACA;AACA;AACA;AACA,8BAA8B,4DAA4D;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,uCAAuC;AAC1E,mBAAmB;AACnB;AACA,4CAA4C,iEAAiE;AAC7G;AACA;AACA;AACA,iCAAiC,mCAAmC;AACpE,mBAAmB;AACnB,4CAA4C,+DAA+D;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,qBAAqB;AACtD;AACA;AACA,SAAS;AACT,mBAAmB,+CAA+C;AAClE;AACA;AACA;AACA,4CAA4C,6DAA6D;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA,4CAA4C,oIAAoI;AAChL;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,oDAAe;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wCAAwC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,oDAAe;AAC5C;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA,uBAAuB;AACvB;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,oDAAe;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,oDAAe;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA,uBAAuB;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,oDAAe;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,sBAAsB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,oDAAe;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,oDAAe;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,0CAA0C;AAC3C;AACA;AACA;AACA;AACA;AACA,CAAC,4CAA4C;AAC7C;AACA;AACA;AACA;AACA;AACA,gCAAgC,oDAAe;AAC/C,iCAAiC,oDAAe;AAChD,wBAAwB,oDAAe;AACvC;AACA;AACA;AACA,+BAA+B,oDAAe;AAC9C,oCAAoC,oDAAe;AACnD;AACA,sCAAsC,oDAAe;AACrD;AACA,gCAAgC,oDAAe;AAC/C,mCAAmC,oDAAe;AAClD,oCAAoC,oDAAe;AACnD,oCAAoC,oDAAe;AACnD;AACA,6BAA6B,oDAAe;AAC5C;AACA;AACA;AACA,gCAAgC,oDAAe;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,sCAAsC;AACpG,yBAAyB,wEAAkB,EAAE,0DAA0D;AACvG,4BAA4B,CAAC,uEAAiB;AAC9C,cAAc,wDAAU;AACxB,KAAK,gBAAgB,WAAW,EAAE,QAAQ,EAAE;;AAE5C;AACA,mBAAmB;AACnB;AACA;AACA;AACA,8DAA8D,sCAAsC;AACpG,wBAAwB,uEAAiB,EAAE,kIAAkI;AAC7K,QAAQ,oEAAc;AACtB,QAAQ,4DAAM;AACd,QAAQ,kEAAY;AACpB,KAAK,EAAE,oBAAoB;AAC3B,4BAA4B,CAAC,uEAAiB;AAC9C,cAAc,uDAAS;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,KAAK,gBAAgB,WAAW,EAAE,QAAQ,EAAE;;AAE5C;AACA;AACA,qBAAqB,sEAAgB,EAAE,sBAAsB;AAC7D,qBAAqB,sEAAgB,EAAE,6CAA6C,mCAAmC,EAAE,iBAAiB;AAC1I,cAAc,oDAAoD,wEAAkB,iBAAiB,gEAAgE,EAAE,EAAE;AACzK,4BAA4B,CAAC,uEAAiB;AAC9C,cAAc,sDAAQ;AACtB;AACA;AACA;AACA;AACA,aAAa;AACb,KAAK,eAAe,EAAE;;AAEtB;AACA;AACA;;AAEA;AACA;AACA;;AAEge;AAChe;;;;;;;;;;;;;ACp5DA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6U;AAC/P;AACnB;AACpB;;AAEvC,8BAA8B,yDAAgB;AAC9C;AACA,4DAA4D,2DAA2D;AACvH,wBAAwB,wEAAkB,EAAE,wDAAwD;AACpG,qCAAqC,2EAAqB;AAC1D,4BAA4B,CAAC,uEAAiB;AAC9C,cAAc,wDAAU;AACxB,KAAK,eAAe,EAAE;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,OAAO;AACjD;AACA;AACA;AACA;AACA,sDAAsD,OAAO;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,0CAA0C;AAChH,6BAA6B,wEAAkB,EAAE,kEAAkE;AACnH,4BAA4B,CAAC,uEAAiB;AAC9C,cAAc,wDAAU;AACxB,KAAK,gBAAgB,WAAW,EAAE,QAAQ,EAAE;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,oDAAe;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,KAAK,6D;AAClB,+D;AACA,gB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,KAAK,4C;AAClB,8C;AACA,gB;AACA;AACA;AACA;AACA,4EAA4E,6CAA6C;AACzH,+BAA+B,uEAAiB,EAAE,2EAA2E,6DAA6D,mFAAmF,EAAE,oBAAoB;AACnS,4BAA4B,CAAC,uEAAiB;AAC9C,cAAc,uDAAS;AACvB;AACA;AACA;AACA,aAAa;AACb,KAAK,gBAAgB,WAAW,EAAE,GAAG;AACrC,kBAAkB,mDAAK;AACvB,SAAS;AACT,kBAAkB,mDAAK;AACvB,SAAS,GAAG,EAAE,EAAE;;AAEhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF,kDAAkD;AACxI,oCAAoC,uEAAiB,EAAE,2FAA2F,+GAA+G,wFAAwF,EAAE,oBAAoB;AAC/W,4BAA4B,CAAC,uEAAiB;AAC9C,cAAc,uDAAS;AACvB;AACA;AACA;AACA,aAAa;AACb,KAAK,gBAAgB,WAAW,EAAE,GAAG;AACrC,kBAAkB,mDAAK;AACvB,SAAS;AACT,kBAAkB,mDAAK;AACvB,SAAS;AACT,kBAAkB,mDAAK;AACvB,SAAS;AACT,kBAAkB,mDAAK;AACvB,SAAS;AACT,kBAAkB,mDAAK;AACvB,SAAS,GAAG,EAAE,EAAE;;AAEhB;AACA,mBAAmB;AACnB;AACA;AACA;AACA,oFAAoF,iDAAiD;AACrI,mCAAmC,uEAAiB,EAAE,yFAAyF,mCAAmC,uFAAuF,EAAE,oBAAoB;AAC/R,4BAA4B,CAAC,uEAAiB;AAC9C,cAAc,uDAAS;AACvB;AACA;AACA;AACA,aAAa;AACb,KAAK,gBAAgB,WAAW,EAAE,GAAG;AACrC,kBAAkB,mDAAK;AACvB,SAAS,GAAG,EAAE,EAAE;;AAEhB;AACA;AACA;AACA;AACA,kCAAkC,uDAAc;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,0CAA0C;AAChH,4BAA4B,uEAAiB,EAAE,0EAA0E,6KAA6K,gFAAgF,EAAE,oBAAoB;AAC5Y,4BAA4B,CAAC,uEAAiB;AAC9C,cAAc,uDAAS;AACvB;AACA;AACA;AACA,aAAa;AACb,KAAK,gBAAgB,WAAW,EAAE,GAAG;AACrC,kBAAkB,mDAAK;AACvB,SAAS;AACT,kBAAkB,mDAAK;AACvB,SAAS;AACT,kBAAkB,mDAAK;AACvB,SAAS;AACT,kBAAkB,mDAAK;AACvB,SAAS;AACT,kBAAkB,mDAAK;AACvB,SAAS;AACT,kBAAkB,mDAAK;AACvB,SAAS,GAAG,EAAE,EAAE;;AAEhB;AACA;AACA;AACA;AACA,kCAAkC,uDAAc;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,yCAAyC;AAC7G,2BAA2B,uEAAiB,EAAE,wEAAwE,2HAA2H,+EAA+E,EAAE,oBAAoB;AACtV,4BAA4B,CAAC,uEAAiB;AAC9C,cAAc,uDAAS;AACvB;AACA;AACA;AACA,aAAa;AACb,KAAK,gBAAgB,WAAW,EAAE,GAAG;AACrC,kBAAkB,mDAAK;AACvB,SAAS;AACT,kBAAkB,mDAAK;AACvB,SAAS;AACT,kBAAkB,mDAAK;AACvB,SAAS;AACT,kBAAkB,mDAAK;AACvB,SAAS;AACT,kBAAkB,mDAAK;AACvB,SAAS,GAAG,EAAE,EAAE;;AAEhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,0CAA0C;AAChH,4BAA4B,uEAAiB,EAAE,kFAAkF,wEAA0B,iFAAiF,EAAE,oBAAoB;AAClQ,4BAA4B,CAAC,uEAAiB;AAC9C,cAAc,uDAAS;AACvB;AACA;AACA;AACA,aAAa;AACb,KAAK,gBAAgB,WAAW,EAAE,QAAQ,EAAE;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,2CAA2C;AACnH,6BAA6B,uEAAiB,EAAE,oFAAoF,wEAA0B,kFAAkF,EAAE,oBAAoB;AACtQ,4BAA4B,CAAC,uEAAiB;AAC9C,cAAc,uDAAS;AACvB;AACA;AACA;AACA,aAAa;AACb,KAAK,gBAAgB,WAAW,EAAE,QAAQ,EAAE;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,uDAAc;AAChD,yBAAyB,oDAAe;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,0CAA0C;AAChH,4BAA4B,uEAAiB,EAAE,0EAA0E,yGAAyG,gFAAgF,EAAE,oBAAoB;AACxU,4BAA4B,CAAC,uEAAiB;AAC9C,cAAc,uDAAS;AACvB;AACA;AACA;AACA;AACA,aAAa;AACb,KAAK,gBAAgB,WAAW,EAAE,GAAG;AACrC,kBAAkB,mDAAK;AACvB,SAAS;AACT,kBAAkB,mDAAK;AACvB,SAAS;AACT,kBAAkB,mDAAK;AACvB,SAAS;AACT,kBAAkB,mDAAK;AACvB,SAAS,GAAG,EAAE,EAAE;;AAEhB;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,uDAAc;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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","file":"main-es2015.js","sourcesContent":["import { ɵɵdefineInjectable, ɵsetClassMetadata, Injectable, ɵɵdefineComponent, ɵɵelementStart, ɵɵtext, ɵɵelementEnd, Component, ɵɵdefineNgModule, ɵɵdefineInjector, ɵɵsetNgModuleScope, NgModule } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\n// Copyright (c) 2016, Tim Wentzlau\r\n// Licensed under MIT\r\nclass KerviSpineBase {\r\n    constructor(constructorOptions) {\r\n        this.constructorOptions = constructorOptions;\r\n        this.isConnected = false;\r\n        this.doAuthenticate = false;\r\n        this.sessionId = null;\r\n        this.queryHandlers = [];\r\n        this.commandHandlers = [];\r\n        this.eventHandlers = [];\r\n        this.streamHandlers = [];\r\n        this.rpcQueue = {};\r\n        this.ready = false;\r\n        this.messageId = 0;\r\n        this.sensors = {};\r\n        this.controllers = {};\r\n        this.sensorTypes = [];\r\n        this.controllerTypes = [];\r\n        this.visionRegions = [];\r\n        this.application = null;\r\n        this.allowAnonymous = true;\r\n        this.firstOnOpen = true;\r\n        this.messageCount = 0;\r\n        this.mpsTime = new Date;\r\n        this.mps = 0;\r\n        this.websocket = null;\r\n        this.options = {\r\n            userName: 'anonymous',\r\n            password: null,\r\n            address: null,\r\n            onOpen: null,\r\n            onClose: null,\r\n            onAuthenticate: null,\r\n            onAuthenticateFailed: null,\r\n            onAuthenticateStart: null,\r\n            onLogOff: null,\r\n            onMPS: null,\r\n            autoConnect: true,\r\n            targetScope: null,\r\n            protocol: 'ws',\r\n            apiToken: null\r\n        };\r\n        this.addEventHandler = function (eventName, id, callback) {\r\n        };\r\n        this.addStreamHandler = function (streamId, streamEvent, callback) {\r\n        };\r\n        this.removeStreamHandler = function (streamId, streamEvent, callback) {\r\n        };\r\n        console.log('Kervi base spine init', this.options, constructorOptions);\r\n        this.options = this.extend(this.options, constructorOptions);\r\n        console.log('kbo', this.options);\r\n        this.connect();\r\n        const self = this;\r\n        setInterval(function () {\r\n            var hangingNodes = [];\r\n            for (let id in self.rpcQueue) {\r\n                var query = self.rpcQueue[id];\r\n                if (query['callbackTimeout']) {\r\n                    if (Date.now() - query['ts'] > query['timeout']) {\r\n                        var callback = query['callbackTimeout'];\r\n                        hangingNodes.push(id);\r\n                        callback.call(self.options.targetScope);\r\n                    }\r\n                }\r\n            }\r\n            for (let id of hangingNodes) {\r\n                delete self.rpcQueue[id];\r\n            }\r\n        }, 1);\r\n    }\r\n    extend(...p) {\r\n        for (let i = 1; i < p.length; i++) {\r\n            for (let key in p[i]) {\r\n                if (p[i].hasOwnProperty(key)) {\r\n                    p[0][key] = p[i][key];\r\n                }\r\n            }\r\n        }\r\n        return p[0];\r\n    }\r\n    addRPCCallback(id, callback, callbackTimeout, timeout) {\r\n        if (callback) {\r\n            this.rpcQueue[id] = {\r\n                'callback': callback,\r\n                'callbackTimeout': callbackTimeout,\r\n                'timeout': timeout,\r\n                'ts': Date.now(),\r\n            };\r\n        }\r\n    }\r\n    handleRPCResponse(message) {\r\n        if (message.id in this.rpcQueue) {\r\n            var callback = this.rpcQueue[message.id]['callback'];\r\n            if (callback) {\r\n                delete this.rpcQueue[message.id];\r\n                callback.call(this.options.targetScope, message.response, message.response);\r\n            }\r\n        }\r\n    }\r\n    handleEvent(message) {\r\n        // console.log('ev', message)\r\n        const eventName = message.event;\r\n        const id = message.id;\r\n        let eventPath = eventName;\r\n        if (id) {\r\n            eventPath += '/' + id;\r\n        }\r\n        let value = null;\r\n        if (message.args && message.args.length) {\r\n            value = message.args[0];\r\n        }\r\n        for (var n = 0; (n < this.eventHandlers.length); n++) {\r\n            let h = this.eventHandlers[n];\r\n            if (h.eventName === eventPath)\r\n                h.callback.call(value, id, value);\r\n            else if (h.eventName === eventName)\r\n                h.callback.call(value, id, value);\r\n        }\r\n    }\r\n    handleStream(message, streamBlob) {\r\n        const streamTag = message.streamId + '/' + message.streamEvent;\r\n        for (let n = 0; (n < this.streamHandlers.length); n++) {\r\n            const h = this.streamHandlers[n];\r\n            if (h.streamTag === streamTag) {\r\n                h.callback.call(message.streamId, message.streamId, message.streamEvent, streamBlob);\r\n            }\r\n            else if (h.streamTag === message.streamId) {\r\n                h.callback.call(message.streamId, message.streamId, message.streamEvent, streamBlob);\r\n            }\r\n        }\r\n    }\r\n    handleCommand(message) {\r\n        console.log('cmd', this, message);\r\n        var command = message.command;\r\n        var args = null;\r\n        if (message.args && message.args.length) {\r\n            args = message.args[0];\r\n        }\r\n        for (var n = 0; (n < this.commandHandlers.length); n++) {\r\n            var c = this.commandHandlers[n];\r\n            if (c.command == command)\r\n                c.callback.call(this, args);\r\n        }\r\n    }\r\n    connect() {\r\n    }\r\n    onOpen(evt) {\r\n        console.log('Kervi open', this, evt);\r\n        this.isConnected = true;\r\n        this.eventHandlers = [];\r\n        this.streamHandlers = [];\r\n        this.commandHandlers = [];\r\n        this.queryHandlers = [];\r\n        console.log('Kervi spine ready');\r\n    }\r\n    onClose(evt) {\r\n        console.log('Kervi spine on close', evt);\r\n        this.isConnected = false;\r\n        const self = this;\r\n        if (this.options.onClose)\r\n            this.options.onClose.call(this.options.targetScope, evt);\r\n        this.firstOnOpen = true;\r\n        if (this.options.autoConnect) {\r\n            setTimeout(function () {\r\n                self.connect();\r\n            }, 1000);\r\n        }\r\n    }\r\n    authenticate(userName, password) {\r\n    }\r\n    logoff() {\r\n    }\r\n    onMessage(evt) {\r\n    }\r\n    onError(evt) {\r\n        console.log('Kervi on error', evt);\r\n    }\r\n    addCommandHandler(command, callback) {\r\n    }\r\n    addQueryHandler(query, callback) {\r\n    }\r\n    sendCommand(command, ...p) {\r\n    }\r\n    sendQuery(query, ...p) {\r\n    }\r\n    triggerEvent(eventName, id) {\r\n    }\r\n    streamData(stream_id, event, data) {\r\n    }\r\n}\n\n// Copyright (c) 2016, Tim Wentzlau\r\nclass KerviWSSpine extends KerviSpineBase {\r\n    constructor(constructorOptions) {\r\n        super(constructorOptions);\r\n        this.constructorOptions = constructorOptions;\r\n        this.addEventHandler = function (eventName, id, callback) {\r\n            if (id)\r\n                this.eventHandlers.push({ 'eventName': eventName + '/' + id, callback: callback });\r\n            else\r\n                this.eventHandlers.push({ 'eventName': eventName, callback: callback });\r\n            var cmd = { id: this.messageId++, 'messageType': 'registerEventHandler', 'event': eventName, 'eventId': id };\r\n            //console.log('add event handler',cmd);\r\n            this.websocket.send(JSON.stringify(cmd));\r\n        };\r\n        this.addStreamHandler = function (streamId, streamEvents, callback) {\r\n            if (streamEvents && streamEvents.length > 0) {\r\n                for (let event of streamEvents) {\r\n                    this.streamHandlers.push({ 'streamTag': streamId + '/' + event, callback: callback });\r\n                    const cmd = {\r\n                        id: this.messageId++,\r\n                        'messageType': 'registerStreamHandler',\r\n                        'streamId': streamId,\r\n                        'streamEvent': event\r\n                    };\r\n                    console.log('as', cmd);\r\n                    this.websocket.send(JSON.stringify(cmd));\r\n                }\r\n            }\r\n            else {\r\n                this.streamHandlers.push({ 'streamTag': streamId, callback: callback });\r\n                const cmd = {\r\n                    id: this.messageId++,\r\n                    'messageType': 'registerStreamHandler',\r\n                    'streamId': streamId,\r\n                    'streamEvent': event\r\n                };\r\n                console.log('as', cmd);\r\n                this.websocket.send(JSON.stringify(cmd));\r\n            }\r\n        };\r\n        this.removeStreamHandler = function (streamId, streamEvents) {\r\n            if (streamEvents && streamEvents.length > 0) {\r\n                for (let event of streamEvents) {\r\n                    //this.streamHandlers.push({'streamTag': streamId + '/' + event, callback: callback});\r\n                    const cmd = {\r\n                        id: this.messageId++,\r\n                        'messageType': 'removeStreamHandler',\r\n                        'streamId': streamId,\r\n                        'streamEvent': event\r\n                    };\r\n                    console.log('as', cmd);\r\n                    this.websocket.send(JSON.stringify(cmd));\r\n                }\r\n            }\r\n            else {\r\n                //this.streamHandlers.push({'streamTag': streamId, callback: callback});\r\n                const cmd = {\r\n                    id: this.messageId++,\r\n                    'messageType': 'removeStreamHandler',\r\n                    'streamId': streamId,\r\n                    'streamEvent': event\r\n                };\r\n                console.log('as', cmd);\r\n                this.websocket.send(JSON.stringify(cmd));\r\n            }\r\n        };\r\n        console.log('kervi spine constructor');\r\n    }\r\n    connect() {\r\n        if (this.isConnected) {\r\n            console.log('Kervi is connected');\r\n            return;\r\n        }\r\n        const self = this;\r\n        this.websocket = new WebSocket(this.options.protocol + '://' + this.options.address);\r\n        this.websocket.binaryType = 'arraybuffer';\r\n        this.websocket.onopen = function (evt) {\r\n            console.log('kervi spine on open');\r\n            self.onOpen(evt);\r\n        };\r\n        this.websocket.onclose = function (evt) {\r\n            self.onClose(evt);\r\n        };\r\n        this.websocket.onmessage = function (evt) {\r\n            if (typeof evt.data === 'string') {\r\n                const message = JSON.parse(evt.data);\r\n                self.onMessage(message);\r\n            }\r\n            else {\r\n                const jsonLen = new Int32Array(evt.data.slice(0, 4))[0];\r\n                const jsonBlob = evt.data.slice(4, jsonLen + 4);\r\n                const streamBlob = evt.data.slice(4 + jsonLen);\r\n                const utf8decoder = new TextDecoder();\r\n                const j = utf8decoder.decode(jsonBlob);\r\n                self.onMessage(JSON.parse(j), streamBlob);\r\n            }\r\n        };\r\n        this.websocket.onerror = function (evt) {\r\n            self.onError(evt);\r\n        };\r\n    }\r\n    authenticate(userName, password) {\r\n        this.options.userName = userName;\r\n        this.options.password = password;\r\n        const cmd = { id: this.messageId++, 'messageType': 'authenticate', 'userName': userName, 'password': password };\r\n        console.log('swa', cmd);\r\n        this.websocket.send(JSON.stringify(cmd));\r\n    }\r\n    logoff() {\r\n        const cmd = { id: this.messageId++, 'messageType': 'logoff', 'session': this.sessionId };\r\n        this.sessionId = null;\r\n        this.websocket.send(JSON.stringify(cmd));\r\n    }\r\n    onMessage(message, streamBlob = null) {\r\n        // if (message.messageType !== 'stream') {\r\n        //     console.log('on m', message);\r\n        // }\r\n        const self = this;\r\n        const now = new Date();\r\n        const fpsDiff = now.getTime() - this.mpsTime.getTime();\r\n        const seconds = fpsDiff / 1000;\r\n        this.messageCount++;\r\n        if (seconds > 1) {\r\n            this.mps = Math.round(this.messageCount / seconds);\r\n            this.messageCount = 0;\r\n            this.mpsTime = now;\r\n            if (this.options.onMPS) {\r\n                this.options.onMPS.call(this.options.targetScope, this.mps);\r\n            }\r\n        }\r\n        if (message.messageType === 'authenticate') {\r\n            console.log('authenticate');\r\n            this.doAuthenticate = true;\r\n            if (this.options.userName)\r\n                this.authenticate(this.options.userName, this.options.password);\r\n            else\r\n                this.options.onAuthenticate.call(this.options.targetScope, message);\r\n        }\r\n        else if (message.messageType === 'authentication_failed') {\r\n            console.log('authentication failed', this.options.userName);\r\n            if (this.options.userName == 'anonymous') {\r\n                this.allowAnonymous = false;\r\n                this.options.userName = null;\r\n                this.options.password = null;\r\n                this.sessionId = null;\r\n                if (self.options.onLogOff) {\r\n                    self.options.onLogOff.call(self.options.targetScope, message);\r\n                }\r\n            }\r\n            else\r\n                this.options.onAuthenticateFailed.call(this.options.targetScope, message);\r\n        }\r\n        else if (message.messageType === 'session_authenticated') {\r\n            const date = new Date();\r\n            date.setTime(date.getTime() + (2 * 60 * 60 * 1000));\r\n            const expires = '; expires=' + date.toUTCString();\r\n            this.sessionId = message.session;\r\n            document.cookie = 'kervisession' + '=' + message.session + expires + '; path=/';\r\n            setTimeout(function () {\r\n                console.log('to', self.options);\r\n                if (self.options.onOpen)\r\n                    self.options.onOpen.call(self.options.targetScope, self.firstOnOpen, message);\r\n                self.firstOnOpen = false;\r\n            }, 100);\r\n        }\r\n        else if (message.messageType == 'session_logoff') {\r\n            if (self.options.onLogOff)\r\n                self.options.onLogOff.call(self.options.targetScope, message);\r\n            if (this.allowAnonymous && this.options.userName != 'anonymous') {\r\n                this.authenticate('anonymous', null);\r\n            }\r\n            else {\r\n                self.options.userName = null;\r\n                self.options.password = null;\r\n                self.sessionId = null;\r\n            }\r\n        }\r\n        else if (message.messageType == 'response')\r\n            this.handleRPCResponse(message);\r\n        else if (message.messageType == 'event')\r\n            this.handleEvent(message);\r\n        else if (message.messageType == 'stream')\r\n            this.handleStream(message, streamBlob);\r\n        else if (message.messageType == 'command')\r\n            this.handleCommand(message);\r\n        else\r\n            console.log('Kervi spine message unknown', this.rpcQueue, message);\r\n    }\r\n    onError(evt) {\r\n        console.log('Kervi on error', evt);\r\n    }\r\n    addCommandHandler(command, callback) {\r\n        this.commandHandlers.push({ command: command, callback: callback });\r\n        var cmd = { id: this.messageId++, 'messageType': 'registerCommandHandler', 'command': command };\r\n        this.websocket.send(JSON.stringify(cmd));\r\n    }\r\n    ;\r\n    addQueryHandler(query, callback) {\r\n        this.queryHandlers.push({ query: query, callback: callback });\r\n        var cmd = { id: this.messageId++, 'messageType': 'registerQueryHandler', 'query': query };\r\n        this.websocket.send(JSON.stringify(cmd));\r\n    }\r\n    ;\r\n    sendCommand(command, ...p) {\r\n        console.log('sec', arguments);\r\n        var args = [];\r\n        var callback = null;\r\n        for (var i = 0; (i < p.length); i++) {\r\n            if (p[i] instanceof Function)\r\n                callback = p[i];\r\n            else\r\n                args.push(p[i]);\r\n        }\r\n        var cmd = { id: this.messageId++, 'messageType': 'command', 'command': command, 'args': args };\r\n        if (callback && callback instanceof Function)\r\n            this.addRPCCallback(cmd.id.toString(), callback, null, 0);\r\n        console.log('sendCommand', this, cmd);\r\n        this.websocket.send(JSON.stringify(cmd));\r\n    }\r\n    ;\r\n    sendQuery(query, ...p) {\r\n        var args = [];\r\n        var callback = null;\r\n        var callbackTimeout = null;\r\n        var timeout = 10000;\r\n        for (var i = 0; (i < p.length); i++) {\r\n            if (p[i] instanceof Function)\r\n                if (!callback)\r\n                    callback = p[i];\r\n                else\r\n                    callbackTimeout = p[i];\r\n            else {\r\n                if (callbackTimeout)\r\n                    timeout = p[i];\r\n                else\r\n                    args.push(p[i]);\r\n            }\r\n        }\r\n        var cmd = { id: this.messageId++, 'messageType': 'query', 'query': query, 'args': args };\r\n        this.addRPCCallback(cmd.id.toString(), callback, callbackTimeout, timeout);\r\n        console.log('sendQuery', callback, cmd);\r\n        this.websocket.send(JSON.stringify(cmd));\r\n    }\r\n    ;\r\n    triggerEvent(eventName, id) {\r\n        var e = { id: this.messageId++, 'messageType': 'event', 'event': eventName, 'args': arguments };\r\n        this.websocket.send(JSON.stringify(e));\r\n    }\r\n    ;\r\n}\n\n// Copyright (c) 2016, Tim Wentzlau\r\nclass KerviRMQSpine extends KerviSpineBase {\r\n    constructor(constructorOptions) {\r\n        super(constructorOptions);\r\n        this.constructorOptions = constructorOptions;\r\n        this.exchange = \"/exchange/\";\r\n        this.addEventHandler = function (eventName, id, callback) {\r\n            if (id)\r\n                this.eventHandlers.push({ \"eventName\": eventName + \"/\" + id, callback: callback });\r\n            else\r\n                this.eventHandlers.push({ \"eventName\": eventName, callback: callback });\r\n            var cmd = { id: this.messageId++, \"messageType\": \"registerEventHandler\", \"event\": eventName, \"eventId\": id };\r\n            this.websocket.send(this.exchange, { topic: \"registerEventHandler\", router_id: this.socketSession }, JSON.stringify(cmd));\r\n        };\r\n        console.log(\"Kervi io spine init y\", this.options, constructorOptions);\r\n    }\r\n    onMQError(frame) {\r\n        console.log(\"MQ error\", frame);\r\n    }\r\n    connect() {\r\n        if (this.isConnected) {\r\n            console.log(\"Kervi is connected\");\r\n            return;\r\n        }\r\n        var self = this;\r\n        //var mqUrl= this.options.protocol + \"://\" + this.options.address\r\n        var mqUrl = \"wss://mq.kervi.io:15673/ws\";\r\n        this.websocket = Stomp.client(mqUrl);\r\n        this.websocket.heartbeat.incoming = 0;\r\n        self.exchange = \"/exchange/\" + self.options.apiToken.app_id;\r\n        console.log(\"exchange\", self.exchange);\r\n        this.websocket.connect(self.options.apiToken.api_token, \"ui\", function (frame) {\r\n            console.log(\"MQ connect\", frame, self.websocket, this, self);\r\n            self.socketSession = frame.headers.session;\r\n            self.exchange = \"/exchange/\" + self.options.apiToken.app_id;\r\n            self.websocket.subscribe(self.exchange, function (message) {\r\n                console.log(\"mq \", message);\r\n                if (message.headers[\"topic\"])\r\n                    message.headers[\"topic\"] = message.headers[\"topic\"].replace(new RegExp(\"\\\\c\", \"g\"), \":\");\r\n                if (message.command == \"CONNECTED\") {\r\n                }\r\n                else if (message.headers[\"topic\"] == \"ping\")\r\n                    self.onPing(message);\r\n                else\r\n                    self.onMessage(message);\r\n            }, {});\r\n        }, self.onMQError, self.options.apiToken.api_channel);\r\n    }\r\n    onPing(message) {\r\n        console.log(\"onping\", this.options.appId, message);\r\n        var self = this;\r\n        if (!this.isConnected && message.headers[\"connection_id\"] == self.options.apiToken.app_id) {\r\n            this.onOpen(message);\r\n            this.websocket.send(self.exchange, { topic: \"session:new\", router_id: message.headers[\"router_id\"], session_id: this.socketSession }, \"{}\");\r\n        }\r\n    }\r\n    authenticate(userName, password) {\r\n        this.options.userName = userName;\r\n        this.options.password = password;\r\n        if (this.options.onAuthenticateStart)\r\n            this.options.onAuthenticateStart.call(this.options.targetScope);\r\n        var cmd = { id: this.messageId++, \"messageType\": \"authenticate\", \"userName\": this.options.userName, \"password\": this.options.password };\r\n        this.websocket.send(JSON.stringify(cmd));\r\n    }\r\n    logoff() {\r\n        //this.options.userName = this.allowAnonymous ? \"anonymous\" : null;\r\n        //this.options.password = null;\r\n        var cmd = { id: this.messageId++, \"messageType\": \"logoff\", \"session\": this.sessionId };\r\n        this.sessionId = null;\r\n        this.websocket.send(JSON.stringify(cmd));\r\n    }\r\n    onMessage(evt) {\r\n        console.log(\"on m\", evt);\r\n        var message = JSON.parse(evt.body);\r\n        var self = this;\r\n        var topic = evt.headers[\"topic\"];\r\n        if (topic == \"authenticate\") {\r\n            console.log(\"authenticate\");\r\n            this.doAuthenticate = true;\r\n            if (this.options.userName)\r\n                this.authenticate(this.options.userName, this.options.password);\r\n            else\r\n                this.options.onAuthenticate.call(this.options.targetScope, evt);\r\n        }\r\n        else if (topic == \"authentication_failed\") {\r\n            console.log(\"authentication failed\", this.options.userName);\r\n            if (this.options.userName == \"anonymous\") {\r\n                this.allowAnonymous = false;\r\n                this.options.userName = null;\r\n                this.options.password = null;\r\n                this.sessionId = null;\r\n                console.log(\"x\", self.options);\r\n                if (self.options.onLogOff) {\r\n                    console.log(\"x1\");\r\n                    self.options.onLogOff.call(self.options.targetScope, evt);\r\n                }\r\n            }\r\n            else\r\n                this.options.onAuthenticateFailed.call(this.options.targetScope, evt);\r\n        }\r\n        else if (topic == \"session_authenticated\") {\r\n            var date = new Date();\r\n            date.setTime(date.getTime() + (2 * 60 * 60 * 1000));\r\n            var expires = \"; expires=\" + date.toUTCString();\r\n            this.sessionId = message.session;\r\n            document.cookie = \"kervisession\" + \"=\" + message.session + expires + \"; path=/\";\r\n            setTimeout(function () {\r\n                if (self.options.onOpen)\r\n                    self.options.onOpen.call(self.options.targetScope, self.firstOnOpen, evt);\r\n                self.firstOnOpen = false;\r\n            }, 100);\r\n        }\r\n        else if (topic == \"session_logoff\") {\r\n            if (self.options.onLogOff)\r\n                self.options.onLogOff.call(self.options.targetScope, evt);\r\n            if (this.allowAnonymous && this.options.userName != \"anonymous\") {\r\n                this.authenticate(\"anonymous\", null);\r\n            }\r\n            else {\r\n                self.options.userName = null;\r\n                self.options.password = null;\r\n                self.sessionId = null;\r\n            }\r\n        }\r\n        else if (evt.headers[\"type\"] == \"query_response\") {\r\n            this.handleRPCResponse({ id: evt.headers[\"query_id\"], response: message });\r\n        }\r\n        else if (evt.headers[\"type\"] == \"event\") {\r\n            console.log(\"e\", evt);\r\n            var topic_tag = evt.headers[\"topic\"].split(\":\");\r\n            this.handleEvent({ event: topic_tag[1], id: topic_tag[2], args: message.args });\r\n        }\r\n        else if (message.messageType == \"command\")\r\n            this.handleCommand(message);\r\n        else\r\n            console.log(\"Kervi spine message unknown\", this.rpcQueue, evt);\r\n    }\r\n    onError(evt) {\r\n        console.log(\"Kervi on error\", evt);\r\n    }\r\n    addCommandHandler(command, callback) {\r\n        this.commandHandlers.push({ command: command, callback: callback });\r\n        var cmd = { id: this.messageId++, \"messageType\": \"registerCommandHandler\", \"command\": command };\r\n        //this.websocket.send(JSON.stringify(cmd));\r\n        this.websocket.send(this.exchange, { topic: \"registerCommandHandler\", router_id: this.socketSession }, JSON.stringify(cmd));\r\n    }\r\n    ;\r\n    addQueryHandler(query, callback) {\r\n        this.queryHandlers.push({ query: query, callback: callback });\r\n        var cmd = { id: this.messageId++, \"messageType\": \"registerQueryHandler\", \"query\": query };\r\n        this.websocket.send(this.exchange, { topic: \"registerQueryHandler\", router_id: this.socketSession }, JSON.stringify(cmd));\r\n    }\r\n    ;\r\n    sendCommand(command, ...p) {\r\n        console.log(\"sec\", arguments);\r\n        var args = [];\r\n        var callback = null;\r\n        for (var i = 0; (i < p.length); i++) {\r\n            if (p[i] instanceof Function)\r\n                callback = p[i];\r\n            else\r\n                args.push(p[i]);\r\n        }\r\n        /*if (p.length>1){\r\n            var argOffset=1;\r\n            if ( callback && callback instanceof Function )\r\n                argOffset+=1;\r\n            for (var i=argOffset;(i<arguments.length);i++){\r\n                args.push(arguments[i]);\r\n            }\r\n        }*/\r\n        var cmd = { id: this.messageId++, \"args\": args, kwargs: {} };\r\n        if (callback && callback instanceof Function)\r\n            this.addRPCCallback(cmd.id.toString(), callback, null, 0);\r\n        console.log(\"sendCommand\", this, cmd);\r\n        this.websocket.send(this.exchange, { topic: \"command:\" + command, router_id: this.socketSession }, JSON.stringify(cmd));\r\n    }\r\n    ;\r\n    sendQuery(query, ...p) {\r\n        var args = [];\r\n        var callback = null;\r\n        var callbackTimeout = null;\r\n        var timeout = 10000;\r\n        for (var i = 0; (i < p.length); i++) {\r\n            if (p[i] instanceof Function)\r\n                if (!callback)\r\n                    callback = p[i];\r\n                else\r\n                    callbackTimeout = p[i];\r\n            else {\r\n                if (callbackTimeout)\r\n                    timeout = p[i];\r\n                else\r\n                    args.push(p[i]);\r\n            }\r\n        }\r\n        var cmd = { id: this.messageId++, \"messageType\": \"query\", \"query\": query, \"args\": args, kwargs: [], qts: 0 };\r\n        this.addRPCCallback(cmd.id.toString(), callback, callbackTimeout, timeout);\r\n        console.log(\"sendQuery\", callback, cmd);\r\n        //this.websocket.send(JSON.stringify(cmd));\r\n        this.websocket.send(this.exchange, { topic: \"query:\" + query, qts: 0, query_id: cmd.id.toString(), router_id: this.socketSession, response_address: this.socketSession }, JSON.stringify(cmd));\r\n    }\r\n    ;\r\n    triggerEvent(eventName, id) {\r\n        var e = { id: this.messageId++, \"messageType\": \"event\", \"event\": eventName, \"args\": arguments };\r\n        this.websocket.send(JSON.stringify(e));\r\n    }\r\n    ;\r\n}\n\nclass DashboardLink {\r\n    /*constructor(dashboardId:string, sectionId:string, sectionName:string){\r\n        this.dashboardId = dashboardId;\r\n        this.sectionId = sectionId;\r\n        this.sectionName = sectionName;\r\n    }*/\r\n    constructor(component, message) {\r\n        this.dashboardId = message.dashboardId;\r\n        this.panelId = message.sectionId;\r\n        this.panelName = message.sectionName;\r\n        this.component = component;\r\n        this.parameters = message.parameters;\r\n    }\r\n}\n\n// Copyright (c) 2016, Tim Wentzlau\r\nclass KerviValue {\r\n    constructor() {\r\n        this.componentType = \"KerviValue\";\r\n        this.typeName = null;\r\n        this.dashboards = [];\r\n        this.ui = {\r\n            type: \"\",\r\n            orientation: \"\",\r\n            visible: true\r\n        };\r\n    }\r\n}\r\nclass KerviValueType extends KerviValue {\r\n    constructor(message, kerviService) {\r\n        super();\r\n        this.kerviService = null;\r\n        this.kerviService = kerviService;\r\n        this.value$ = new BehaviorSubject(message.value);\r\n        this.name = message.name;\r\n        this.isInput = message.isInput;\r\n        this.ui = message.ui;\r\n        this.command = message.command;\r\n        this.id = message.id;\r\n        this.ui[\"type\"] = message.componentType;\r\n        this.ui[\"orientation\"] = message.orientation;\r\n        this.ui[\"visible\"] = message.visible;\r\n        for (var prop in message.ui) {\r\n            if (this.ui[prop] != undefined)\r\n                this.ui[prop] = message.ui[prop];\r\n        }\r\n        for (let dashboardLink of message.dashboardLinks) {\r\n            this.dashboards.push(new DashboardLink(this, dashboardLink));\r\n        }\r\n    }\r\n    get value() {\r\n        //console.log(\"gv\", this.id, this.value$.value)\r\n        return this.value$.value;\r\n    }\r\n    set value(value) {\r\n        console.log(\"sv\", this.id);\r\n        this.value$.next(value);\r\n        this.kerviService.spine.sendCommand(this.command, value);\r\n    }\r\n    set(v, notify = true) {\r\n        this.value$.next(v);\r\n        if (notify)\r\n            this.kerviService.spine.sendCommand(this.command, v);\r\n    }\r\n}\r\nvar ValueRangeType;\r\n(function (ValueRangeType) {\r\n    ValueRangeType[ValueRangeType[\"normal\"] = 0] = \"normal\";\r\n    ValueRangeType[ValueRangeType[\"warning\"] = 1] = \"warning\";\r\n    ValueRangeType[ValueRangeType[\"error\"] = 2] = \"error\";\r\n})(ValueRangeType || (ValueRangeType = {}));\r\n;\r\nclass ValueRange {\r\n    constructor(range) {\r\n        this.start = null;\r\n        this.end = null;\r\n        this.type = null;\r\n        this.start = range[\"start\"];\r\n        this.end = range[\"end\"];\r\n        if (range[\"type\"] == \"warning\")\r\n            this.type = ValueRangeType.warning;\r\n        else if (range[\"type\"] == \"error\")\r\n            this.type = ValueRangeType.error;\r\n        else\r\n            this.type = ValueRangeType.normal;\r\n    }\r\n}\r\nclass KerviEnumOptionModel {\r\n    constructor(messageOption) {\r\n        this.selected$ = new BehaviorSubject(false);\r\n        this.value = messageOption.value;\r\n        this.text = messageOption.text;\r\n        this.selected$.next(messageOption.selected);\r\n    }\r\n    updateReferences() { }\r\n    ;\r\n    reload(component) { }\r\n    ;\r\n    removeReferences(components) { }\r\n    ;\r\n}\r\nclass SelectValue extends KerviValueType {\r\n    constructor(message, kerviService) {\r\n        super(message, kerviService);\r\n        this.options = [];\r\n        this.lastSelected$ = new BehaviorSubject(null);\r\n        var self = this;\r\n        this.options = [];\r\n        for (let option of message.options) {\r\n            this.options.push(new KerviEnumOptionModel(option));\r\n        }\r\n        this.selectOptions(this.value$.value);\r\n        this.value$.subscribe(function (v) {\r\n            self.selectOptions(v);\r\n        });\r\n    }\r\n    getDefaultValue() {\r\n        return [];\r\n    }\r\n    selectOptions(selectedOptions) {\r\n        console.log(\"soc\");\r\n        if (!selectedOptions)\r\n            return;\r\n        for (let option of this.options) {\r\n            option.selected$.next(false);\r\n        }\r\n        for (let selectedOption of selectedOptions) {\r\n            console.log(\"so\", selectedOption);\r\n            for (let option of this.options) {\r\n                console.log(\"sox\", option);\r\n                if (option.value == selectedOption) {\r\n                    option.selected$.next(true);\r\n                    this.lastSelected$.next(option);\r\n                    console.log(\"os\", option.text, option.selected$.value);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nclass NumberValue extends KerviValueType {\r\n    constructor(message, kerviService) {\r\n        super(message, kerviService);\r\n        this.qtyUnitTo = null;\r\n        this.sparkline$ = new BehaviorSubject([]);\r\n        this.ranges = [];\r\n        this.unit = message.unit;\r\n        this.typeName = \"Number\";\r\n        this.qtyUnitFrom = message.unit;\r\n        if (this.unit == \"c\" && kerviService.application$.value[\"display\"][\"unit_system\"][\"temperature\"] == \"F\") {\r\n            this.qtyUnitFrom = \"tempC\";\r\n            this.qtyUnitTo = \"tempF\";\r\n            this.unit = \"F\";\r\n        }\r\n        for (var range of message.ranges) {\r\n            if (this.qtyUnitTo) {\r\n                var q = new Qty(range[\"start\"], this.qtyUnitFrom);\r\n                range[\"start\"] = q.to(this.qtyUnitTo).scalar;\r\n                var q = new Qty(range[\"end\"], this.qtyUnitFrom);\r\n                range[\"end\"] = q.to(this.qtyUnitTo).scalar;\r\n                this.ranges.push(new ValueRange(range));\r\n            }\r\n            else\r\n                this.ranges.push(new ValueRange(range));\r\n        }\r\n        if (this.qtyUnitTo && message.maxValue) {\r\n            var q = new Qty(message.maxValue, this.qtyUnitFrom);\r\n            this.maxValue = q.to(this.qtyUnitTo).scalar;\r\n        }\r\n        else\r\n            this.maxValue = message.maxValue;\r\n        if (this.qtyUnitTo && message.minValue) {\r\n            var q = new Qty(message.minValue, this.qtyUnitFrom);\r\n            this.minValue = q.to(this.qtyUnitTo).scalar;\r\n        }\r\n        else\r\n            this.minValue = message.minValue;\r\n        var spl = [];\r\n        for (var spv of message.sparkline) {\r\n            if (this.qtyUnitTo) {\r\n                console.log(\"spv\", spv);\r\n                var q = new Qty(spv.value, this.qtyUnitFrom);\r\n                //spv.value = q.to(this.qtyUnitTo).scalar;\r\n            }\r\n            spl.push(spv);\r\n        }\r\n        this.sparkline$.next(spl);\r\n        this.set(message.value, false);\r\n    }\r\n    getDefaultValue() {\r\n        return 0;\r\n    }\r\n    set(v, notify = true) {\r\n        var newValue = v;\r\n        if (this.qtyUnitTo) {\r\n            var q = new Qty(v, this.qtyUnitFrom);\r\n            newValue = q.to(this.qtyUnitTo).scalar;\r\n        }\r\n        this.value$.next(newValue);\r\n        if (notify)\r\n            this.kerviService.spine.sendCommand(this.command, v);\r\n        var spl = this.sparkline$.value;\r\n        spl.push(newValue);\r\n        if (spl.length > 10)\r\n            spl.shift();\r\n        this.sparkline$.next(spl);\r\n    }\r\n}\r\nclass StringValue extends KerviValueType {\r\n    getDefaultValue() {\r\n        return \"\";\r\n    }\r\n    constructor(message, kerviService) {\r\n        super(message, kerviService);\r\n        this.typeName = \"String\";\r\n    }\r\n}\r\nclass BooleanValue extends KerviValueType {\r\n    constructor(message, kerviService) {\r\n        super(message, kerviService);\r\n        this.typeName = \"Boolean\";\r\n    }\r\n    getDefaultValue() {\r\n        return false;\r\n    }\r\n}\r\nclass DateTimeValue extends KerviValueType {\r\n    constructor(message, kerviService) {\r\n        super(message, kerviService);\r\n        this.subType = message.inputType;\r\n        this.typeName = \"DateTime\";\r\n    }\r\n    getDefaultValue() {\r\n        return new Date();\r\n    }\r\n}\r\nclass ColorValue extends KerviValueType {\r\n    constructor(message, kerviService) {\r\n        super(message, kerviService);\r\n        this.typeName = \"Color\";\r\n    }\r\n    getDefaultValue() {\r\n        return \"#ffffff\";\r\n    }\r\n}\n\nclass ComponentRef {\r\n    constructor(message) {\r\n        this.id = message.id;\r\n    }\r\n}\n\n// Copyright (c) 2016, Tim Wentzlau\r\nclass Controller {\r\n    constructor(message, kerviService) {\r\n        this.componentType = \"controller\";\r\n        this.ui = {};\r\n        this.inputs = [];\r\n        this.outputs = [];\r\n        this.actions = [];\r\n        this.inputReferences = [];\r\n        this.outputReferences = [];\r\n        this.actionsReferences = [];\r\n        this.dashboards = [];\r\n        this.kerviService = kerviService;\r\n        this.id = message.id;\r\n        this.name = message.name;\r\n        this.type = message.type;\r\n        this.ui = message.ui;\r\n        this.visible = message.visible;\r\n        this.parameters = message.parameters;\r\n        this.template = message.template;\r\n        for (var ref of message.inputs) {\r\n            this.inputReferences.push(new ComponentRef(ref));\r\n        }\r\n        for (var ref of message.outputs) {\r\n            this.outputReferences.push(new ComponentRef(ref));\r\n        }\r\n        for (var ref of message.actions) {\r\n            this.actionsReferences.push(new ComponentRef(ref));\r\n        }\r\n        for (let dashboardLink of message.dashboardLinks) {\r\n            this.dashboards.push(new DashboardLink(this, dashboardLink));\r\n        }\r\n    }\r\n    updateReferences() {\r\n        if (this.inputs.length == 0) {\r\n            for (var ref of this.inputReferences) {\r\n                var component = this.kerviService.getComponent(ref.id);\r\n                if (component)\r\n                    this.inputs.push(component);\r\n            }\r\n        }\r\n        if (this.outputs.length == 0) {\r\n            for (var ref of this.outputReferences) {\r\n                var component = this.kerviService.getComponent(ref.id);\r\n                if (component)\r\n                    this.outputs.push(component);\r\n            }\r\n        }\r\n        if (this.actions.length == 0) {\r\n            for (var ref of this.actionsReferences) {\r\n                var component = this.kerviService.getComponent(ref.id);\r\n                if (component)\r\n                    this.actions.push(component);\r\n            }\r\n        }\r\n    }\r\n    ;\r\n    removeReferences(components) { }\r\n    ;\r\n    reload(component) { }\r\n    ;\r\n}\n\n// Copyright (c) 2016, Tim Wentzlau\r\n// Licensed under MIT\r\nclass DashboardSizes {\r\n    constructor() {\r\n        this.valueWidth = '3rem';\r\n        this.buttonWidth = '25px';\r\n        this.buttonHeight = '';\r\n        this.switchWidth = '25px';\r\n        this.switchHeight = '25px';\r\n        this.gaugeWidth = '100px';\r\n        this.gaugeHeight = '200px';\r\n    }\r\n}\r\nclass DashboardMessageModel {\r\n    constructor(message) {\r\n        this.timestamp = new Date(message.timestamp * 1000);\r\n        this.topic = message.topic;\r\n        this.body = message.body;\r\n        this.type = message.type;\r\n        this.sourceId = message.source_id;\r\n        this.sourceName = message.source_name;\r\n        this.area = message.area;\r\n        this.level = message.level;\r\n    }\r\n}\r\nclass DashboardPanelComponent {\r\n    constructor(message) {\r\n        this.message = message;\r\n        this.linkId = message.linkId;\r\n        this.componentId = message.componentId;\r\n        this.component = message.component;\r\n        this.parameters = message.parameters;\r\n    }\r\n}\r\nclass DashboardPanelParameters {\r\n    constructor(messageParameters) {\r\n        this.title = null;\r\n        this.width = null;\r\n        this.height = null;\r\n        this.type = null;\r\n        this.userLog = null;\r\n        this.appHealth = null;\r\n        this.logLength = 5;\r\n        this.layout = 'row';\r\n        this.title = messageParameters.label;\r\n        this.height = this.calcSize(messageParameters.height);\r\n        this.width = this.calcSize(messageParameters.width);\r\n        this.userLog = messageParameters.userLog;\r\n        this.logLength = messageParameters.logLength;\r\n        this.appHealth = messageParameters.app_health;\r\n        if (messageParameters.type) {\r\n            this.type = messageParameters.type;\r\n        }\r\n        if (messageParameters.layout) {\r\n            this.layout = messageParameters.layout;\r\n        }\r\n    }\r\n    calcSize(value) {\r\n        if (value == null)\r\n            return '';\r\n        else if (value === '')\r\n            return '';\r\n        else if (isNaN(value)) {\r\n            return value;\r\n        }\r\n        else if (value > 0)\r\n            return value + '%';\r\n        else\r\n            return '';\r\n    }\r\n}\r\nclass DashboardPanel {\r\n    constructor(dashboard, messagePanel) {\r\n        this.components = [];\r\n        this.subPanels = [];\r\n        this.hasOnlyGroupPanels = true;\r\n        this.dashboard = dashboard;\r\n        this.id = messagePanel.id;\r\n        this.name = messagePanel.name;\r\n        this.type = messagePanel.type;\r\n        this.parameters = new DashboardPanelParameters(messagePanel.uiParameters);\r\n        /*if (messagePanel.components)\r\n            for(var componentRef of messagePanel.components){\r\n                this.components.push(new DashboardPanelComponentModel(componentRef))\r\n            }*/\r\n        if (messagePanel.panels) {\r\n            //console.log('spa',messagePanel.panels);\r\n            for (var subMessagePanel of messagePanel.panels) {\r\n                var panel = new DashboardPanel(this, subMessagePanel);\r\n                this.subPanels.push(panel);\r\n                if (panel.type !== 'group')\r\n                    this.hasOnlyGroupPanels = false;\r\n            }\r\n        }\r\n    }\r\n    reload(source) {\r\n        //console.log('rl', this);\r\n        for (var subPanel of source.subPanels) {\r\n            this.reload(subPanel);\r\n        }\r\n        for (var sourceComponent of source.components) {\r\n            var found = false;\r\n            for (var component of this.components) {\r\n                if (component.componentId == sourceComponent.componentId) {\r\n                    found = true;\r\n                }\r\n            }\r\n            if (!found) {\r\n                this.components.push(sourceComponent);\r\n            }\r\n        }\r\n        var deleteComponents = [];\r\n        for (var component of this.components) {\r\n            var found = false;\r\n            for (var sourceComponent of source.components) {\r\n                if (sourceComponent.componentId == component.componentId) {\r\n                    found = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (!found)\r\n                deleteComponents.push(component);\r\n        }\r\n        //console.log('dsc',deleteComponents);\r\n        for (var component of deleteComponents) {\r\n            this.components.splice(this.components.indexOf(component), 1);\r\n        }\r\n    }\r\n}\r\nclass DashboardBackgroundModel {\r\n    constructor(message) {\r\n        this.type = message.type;\r\n        this.cameraId = message.cameraId;\r\n    }\r\n}\r\nclass Dashboard {\r\n    constructor(message) {\r\n        this.headerPanel = null;\r\n        this.footerCenterPanel = null;\r\n        this.footerLeftPanel = null;\r\n        this.footerRightPanel = null;\r\n        this.sysPanel = null;\r\n        this.backgroundPanel = null;\r\n        this.controllerPanel = null;\r\n        this.LeftPadXPanel = null;\r\n        this.LeftPadYPanel = null;\r\n        this.RightPadXPanel = null;\r\n        this.RightPadYPanel = null;\r\n        this.dashboards = [];\r\n        this.currentPanel = null;\r\n        this.id = message.id;\r\n        this.name = message.name;\r\n        this.componentType = 'dashboard';\r\n        this.type = message.type;\r\n        this.isDefault = message.isDefault;\r\n        this.template = message.template;\r\n        this.unitSize = message.unitSize;\r\n        //this.background=new DashboardBackgroundModel(message.background);\r\n        this.panels = [];\r\n        this.sysPanels = [];\r\n        if (!this.template) {\r\n            for (let messagePanel of message.sections) {\r\n                if (!messagePanel) {\r\n                    console.log('dashboard with null panel', this.id);\r\n                    continue;\r\n                }\r\n                var panel = new DashboardPanel(this, messagePanel);\r\n                var sysPanel = true;\r\n                if (panel.id == 'header_center')\r\n                    this.headerPanel = panel;\r\n                else if (panel.id == 'footer_left')\r\n                    this.footerLeftPanel = panel;\r\n                else if (panel.id == 'footer_center')\r\n                    this.footerCenterPanel = panel;\r\n                else if (panel.id == 'footer_right')\r\n                    this.footerRightPanel = panel;\r\n                else if (panel.id == 'header_right')\r\n                    this.sysPanel = panel;\r\n                else if (panel.id == 'controllers')\r\n                    this.controllerPanel = panel;\r\n                else if (panel.id == 'background')\r\n                    this.backgroundPanel = panel;\r\n                else if (panel.id == 'left_pad_x')\r\n                    this.LeftPadXPanel = panel;\r\n                else if (panel.id == 'left_pad_y')\r\n                    this.LeftPadYPanel = panel;\r\n                else if (panel.id == 'right_pad_x')\r\n                    this.RightPadXPanel = panel;\r\n                else if (panel.id == 'right_pad_y')\r\n                    this.RightPadYPanel = panel;\r\n                else {\r\n                    sysPanel = false;\r\n                    if (panel.type != 'group') {\r\n                        if (this.currentPanel == null) {\r\n                            this.currentPanel = new DashboardPanel(this, {\r\n                                'id': null,\r\n                                'name': '',\r\n                                'type': 'group',\r\n                                'components': [],\r\n                                'panels': [],\r\n                                'uiParameters': {\r\n                                    'title': '',\r\n                                    'width': 100,\r\n                                    'height': 0,\r\n                                    'userLog': false,\r\n                                    'logLength': 0\r\n                                }\r\n                            });\r\n                            this.currentPanel.subPanels.push(panel);\r\n                            this.panels.push(this.currentPanel);\r\n                        }\r\n                        else {\r\n                            this.currentPanel.subPanels.push(panel);\r\n                        }\r\n                    }\r\n                    else {\r\n                        this.panels.push(panel);\r\n                        this.currentPanel = null;\r\n                    }\r\n                }\r\n                if (sysPanel)\r\n                    this.sysPanels.push(panel);\r\n            }\r\n            if (!this.currentPanel) {\r\n                this.currentPanel = new DashboardPanel(this, {\r\n                    'id': null,\r\n                    'name': '',\r\n                    'type': 'group',\r\n                    'components': [],\r\n                    'panels': [],\r\n                    'uiParameters': {\r\n                        'title': '',\r\n                        'width': 100,\r\n                        'height': 0,\r\n                        'userLog': false,\r\n                        'logLength': 0\r\n                    }\r\n                });\r\n                //this.currentPanel.subPanels.push(panel);\r\n                this.panels.push(this.currentPanel);\r\n            }\r\n        }\r\n    }\r\n    isEmpty() {\r\n        return this.panels.length == 0;\r\n    }\r\n    removeReferences(deleteComponents) { }\r\n    ;\r\n    updateReferences() { }\r\n    ;\r\n    reload(component) {\r\n        var source = component;\r\n        if (!this.backgroundPanel && source.backgroundPanel)\r\n            this.backgroundPanel = source.backgroundPanel;\r\n        else if (this.backgroundPanel && !source.backgroundPanel)\r\n            this.backgroundPanel = null;\r\n        else if (this.backgroundPanel)\r\n            this.backgroundPanel.reload(source.backgroundPanel);\r\n        if (!this.footerLeftPanel && source.footerLeftPanel)\r\n            this.footerLeftPanel = source.footerLeftPanel;\r\n        else if (this.footerLeftPanel && !source.footerLeftPanel)\r\n            this.footerLeftPanel = null;\r\n        else if (this.footerLeftPanel)\r\n            this.footerLeftPanel.reload(source.footerLeftPanel);\r\n        if (!this.footerRightPanel && source.footerRightPanel)\r\n            this.footerRightPanel = source.footerRightPanel;\r\n        else if (this.footerRightPanel && !source.footerRightPanel)\r\n            this.footerRightPanel = null;\r\n        else if (this.footerRightPanel)\r\n            this.footerRightPanel.reload(source.footerRightPanel);\r\n        if (!this.footerCenterPanel && source.footerCenterPanel)\r\n            this.footerCenterPanel = source.footerCenterPanel;\r\n        else if (this.footerCenterPanel && !source.footerCenterPanel)\r\n            this.footerCenterPanel = null;\r\n        else if (this.footerCenterPanel)\r\n            this.footerCenterPanel.reload(source.footerCenterPanel);\r\n        /*if (!this.headerPanel && source.headerPanel)\r\n            this.headerPanel=source.headerPanel;\r\n        else if (this.headerPanel && !source.headerPanel)\r\n            this.headerPanel = null\r\n        else if (this.headerPanel)\r\n            this.headerPanel.reload(source.headerPanel)*/\r\n        if (!this.sysPanel && source.sysPanel)\r\n            this.sysPanel = source.sysPanel;\r\n        else if (this.sysPanel && !source.sysPanel)\r\n            this.sysPanel = null;\r\n        else if (this.sysPanel)\r\n            this.sysPanel.reload(source.sysPanel);\r\n        if (!this.LeftPadXPanel && source.LeftPadXPanel)\r\n            this.LeftPadXPanel = source.LeftPadXPanel;\r\n        else if (this.LeftPadXPanel && !source.LeftPadXPanel)\r\n            this.LeftPadXPanel = null;\r\n        else if (this.LeftPadXPanel)\r\n            this.LeftPadXPanel.reload(source.LeftPadXPanel);\r\n        if (!this.LeftPadYPanel && source.LeftPadYPanel)\r\n            this.LeftPadYPanel = source.LeftPadYPanel;\r\n        else if (this.LeftPadYPanel && !source.LeftPadYPanel)\r\n            this.LeftPadYPanel = null;\r\n        else if (this.LeftPadYPanel)\r\n            this.LeftPadYPanel.reload(source.LeftPadYPanel);\r\n        if (!this.RightPadXPanel && source.RightPadXPanel)\r\n            this.RightPadXPanel = source.RightPadXPanel;\r\n        else if (this.RightPadXPanel && !source.RightPadXPanel)\r\n            this.RightPadXPanel = null;\r\n        else if (this.RightPadXPanel)\r\n            this.RightPadXPanel.reload(source.RightPadXPanel);\r\n        if (!this.RightPadYPanel && source.RightPadYPanel)\r\n            this.RightPadYPanel = source.RightPadYPanel;\r\n        else if (this.RightPadYPanel && !source.RightPadYPanel)\r\n            this.RightPadYPanel = null;\r\n        else if (this.RightPadYPanel)\r\n            this.RightPadYPanel.reload(source.RightPadYPanel);\r\n        if (!this.controllerPanel && source.controllerPanel)\r\n            this.controllerPanel = source.controllerPanel;\r\n        else if (this.controllerPanel && !source.controllerPanel)\r\n            this.controllerPanel = null;\r\n        else if (this.controllerPanel)\r\n            this.controllerPanel.reload(source.controllerPanel);\r\n    }\r\n    ;\r\n    getDashboardPanelById(id, panels) {\r\n        for (let panel of panels) {\r\n            if (panel.id == id)\r\n                return panel;\r\n            else {\r\n                var res = this.getDashboardPanelById(id, panel.subPanels);\r\n                if (res)\r\n                    return res;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    addDashboardLink(link) {\r\n        if (link.dashboardId == '*' || link.dashboardId == this.id || (link.dashboardId == '**default**' && this.isDefault)) {\r\n            var panelFound = false;\r\n            var panel = this.getDashboardPanelById(link.panelId, this.panels);\r\n            if (!panel)\r\n                panel = this.getDashboardPanelById(link.panelId, this.sysPanels);\r\n            if (panel) {\r\n                panel.components.push(new DashboardPanelComponent(link));\r\n            }\r\n            else {\r\n                // console.log('adh',link);\r\n                var messagePanel = {\r\n                    id: link.panelId,\r\n                    name: link.panelName,\r\n                    type: 'panel',\r\n                    uiParameters: {\r\n                        'title': '',\r\n                        'width': 0,\r\n                        'height': 0,\r\n                        'userLog': false,\r\n                        'logLength': 0\r\n                    }\r\n                };\r\n                var newPanel = new DashboardPanel(this, messagePanel);\r\n                this.currentPanel.subPanels.push(newPanel);\r\n                newPanel.components.push(new DashboardPanelComponent(link));\r\n            }\r\n        }\r\n    }\r\n}\n\n// Copyright (c) 2016, Tim Wentzlau\r\nclass Action {\r\n    constructor(message, kerviService) {\r\n        this.kerviService = null;\r\n        this.id = null;\r\n        this.name = null;\r\n        this.componentType = 'action';\r\n        this.runCommand = '';\r\n        this.interruptCommand = '';\r\n        this.ui = {\r\n            type: '',\r\n            orientation: '',\r\n            visible: true\r\n        };\r\n        this.dashboards = [];\r\n        this.running$ = new BehaviorSubject(false);\r\n        this.kerviService = kerviService;\r\n        this.id = message.id;\r\n        this.name = message.name;\r\n        this.ui = message.ui;\r\n        this.ui.visible = message.visible;\r\n        this.ui.type = message.type;\r\n        this.runCommand = message.runCommand;\r\n        this.interruptCommand = message.interruptCommand;\r\n        this.running$.next(message.running);\r\n        for (let dashboardLink of message.dashboardLinks) {\r\n            this.dashboards.push(new DashboardLink(this, dashboardLink));\r\n        }\r\n    }\r\n    run(parameters) {\r\n        //if (!this.running$.value){\r\n        if (parameters && parameters.length > 0)\r\n            this.kerviService.spine.sendCommand(this.runCommand, ...parameters);\r\n        else\r\n            this.kerviService.spine.sendCommand(this.runCommand);\r\n        //}\r\n    }\r\n    interrupt(parameters) {\r\n        if (parameters && parameters.length > 0)\r\n            this.kerviService.spine.sendCommand(this.interruptCommand, ...parameters);\r\n        else\r\n            this.kerviService.spine.sendCommand(this.interruptCommand);\r\n    }\r\n}\n\nclass ComponentFactory {\r\n    static createComponents(message, kerviService) {\r\n        const foundComponents = this.createComponentsRec(message, kerviService);\r\n        this.linkToDashboards(foundComponents[0], foundComponents[1]);\r\n        return foundComponents[0];\r\n    }\r\n    static createComponentsRec(message, kerviService) {\r\n        let result = [];\r\n        let dashboards = [];\r\n        if (Array.isArray(message)) {\r\n            for (let i = 0; (i < message.length); i++) {\r\n                const subComponents = this.createComponentsRec(message[i], kerviService);\r\n                result = result.concat(subComponents[0]);\r\n                dashboards = dashboards.concat(subComponents[1]);\r\n            }\r\n        }\r\n        else {\r\n            let component = null;\r\n            const subComponents = [];\r\n            if (message.componentType === 'KerviAction') {\r\n                component = new Action(message, kerviService);\r\n            }\r\n            else if (message.componentType === 'dashboard') {\r\n                component = new Dashboard(message);\r\n                dashboards.push(component);\r\n            }\r\n            else if (message.componentType === 'controller') {\r\n                component = new Controller(message, kerviService);\r\n            }\r\n            else if (message.componentType === 'boolean-value') {\r\n                component = new BooleanValue(message, kerviService);\r\n            }\r\n            else if (message.componentType === 'number-value') {\r\n                component = new NumberValue(message, kerviService);\r\n            }\r\n            else if (message.componentType === 'string-value') {\r\n                component = new StringValue(message, kerviService);\r\n            }\r\n            else if (message.componentType === 'enum-value') {\r\n                component = new SelectValue(message, kerviService);\r\n            }\r\n            else if (message.componentType === 'datetime-value') {\r\n                component = new DateTimeValue(message, kerviService);\r\n            }\r\n            else if (message.componentType === 'color-value') {\r\n                component = new ColorValue(message, kerviService);\r\n            }\r\n            if (component) {\r\n                result.push(component);\r\n            }\r\n            if (subComponents) {\r\n                for (let subComponent of subComponents) {\r\n                    result.push(subComponent);\r\n                }\r\n            }\r\n        }\r\n        return [result, dashboards];\r\n    }\r\n    static FixControllerReferences(components) {\r\n        for (let component of components) {\r\n            const controller = component;\r\n            if (controller && controller.componentType === 'controller') {\r\n                controller.updateReferences();\r\n            }\r\n        }\r\n    }\r\n    static linkToDashboards(components, dashboards) {\r\n        console.log('ltd', components, dashboards);\r\n        for (let component of components) {\r\n            if (!(component instanceof Dashboard)) {\r\n                for (let link of component.dashboards) {\r\n                    for (let dashboard of dashboards) {\r\n                        dashboard.addDashboardLink(link);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\n\nclass FileBase {\r\n    constructor() {\r\n        this.isFile = true;\r\n    }\r\n}\r\nclass File extends FileBase {\r\n}\r\nclass Directory extends FileBase {\r\n    constructor(path) {\r\n        super();\r\n        this.files$ = new BehaviorSubject([]);\r\n        this.path = path;\r\n    }\r\n    updateFiles(files) {\r\n        let result = [];\r\n        for (let file of files) {\r\n            if (file.is_file) {\r\n                const fileEntry = new File();\r\n                fileEntry.name = file.name;\r\n                const p = this.path !== '/' ? this.path : '';\r\n                fileEntry.path = p + '/' + file.name;\r\n                result.push(fileEntry);\r\n            }\r\n            else {\r\n                const p = this.path !== '/' ? this.path : '';\r\n                const directory = new Directory(p + '/' + file.name);\r\n                directory.name = file.name;\r\n                directory.isFile = false;\r\n                result.push(directory);\r\n            }\r\n        }\r\n        this.files$.next(result);\r\n    }\r\n}\n\nclass StreamEvent {\r\n    constructor(streamId, streamEvent, data) {\r\n        this.streamId = streamId;\r\n        this.event = streamEvent;\r\n        this.data = data;\r\n    }\r\n}\r\nclass Stream {\r\n    constructor(streamId, events, kerviService) {\r\n        this.streamId = streamId;\r\n        this.events = events;\r\n        this.kerviService = kerviService;\r\n        this.events$ = new BehaviorSubject(null);\r\n        const self = this;\r\n        kerviService.spine.addStreamHandler(streamId, events, function (e_streamId, e_streamEvent, e_data) {\r\n            const event = new StreamEvent(e_streamId, e_streamEvent, e_data);\r\n            let notify = false;\r\n            if (events === null || events.length === 0 || events.indexOf(e_streamEvent) >= 0) {\r\n                notify = true;\r\n            }\r\n            if (notify) {\r\n                self.events$.next(event);\r\n            }\r\n        });\r\n    }\r\n    close() {\r\n        this.kerviService.spine.removeStreamHandler(this.streamId, this.events, null);\r\n    }\r\n}\n\n// Copyright (c) 2016, Tim Wentzlau\r\nvar ConnectionState;\r\n(function (ConnectionState) {\r\n    ConnectionState[ConnectionState[\"disconnected\"] = 0] = \"disconnected\";\r\n    ConnectionState[ConnectionState[\"loading\"] = 1] = \"loading\";\r\n    ConnectionState[ConnectionState[\"authenticate\"] = 2] = \"authenticate\";\r\n    ConnectionState[ConnectionState[\"connected\"] = 3] = \"connected\";\r\n})(ConnectionState || (ConnectionState = {}));\r\nvar UserLogStateType;\r\n(function (UserLogStateType) {\r\n    UserLogStateType[UserLogStateType[\"normal\"] = 0] = \"normal\";\r\n    UserLogStateType[UserLogStateType[\"warning\"] = 1] = \"warning\";\r\n    UserLogStateType[UserLogStateType[\"error\"] = 2] = \"error\";\r\n})(UserLogStateType || (UserLogStateType = {}));\r\nclass KerviBaseService {\r\n    constructor() {\r\n        this.spine = null;\r\n        this.lastAppPingTime = null;\r\n        this.lastPingDiff = 0;\r\n        this.appPingDiff$ = new BehaviorSubject(0);\r\n        this.appPingDelay$ = new BehaviorSubject(0);\r\n        this.mps$ = new BehaviorSubject(0);\r\n        this.appInfo = null;\r\n        this.texts = null;\r\n        this.components = [];\r\n        this.components$ = new BehaviorSubject([]);\r\n        this.connectionState$ = new BehaviorSubject(ConnectionState.disconnected);\r\n        this.doAuthenticate = false;\r\n        this.componentsChanged$ = new BehaviorSubject(false);\r\n        this.logMessages = [];\r\n        this.logMessages$ = new BehaviorSubject([]);\r\n        this.lastLogMessage$ = new BehaviorSubject(null);\r\n        this.LogMessageCount$ = new BehaviorSubject(0);\r\n        this.LogMessageState$ = new BehaviorSubject(UserLogStateType.normal);\r\n        this.streams = {};\r\n        this.IPCReady$ = new BehaviorSubject(false);\r\n        this.authPromise = null;\r\n        console.log('kervi service constructor');\r\n        const self = this;\r\n        this.application$ = new BehaviorSubject(null);\r\n        this.IPCReady$.subscribe(function (connected) {\r\n            if (connected) {\r\n                console.log('kervi service ipc ready (connected)');\r\n                self.spine.addEventHandler('valueChanged', '', function (id, value) {\r\n                    for (const component of self.components) {\r\n                        if (component.id === value.id) {\r\n                            const dynamicValue = component;\r\n                            dynamicValue.valueTS = new Date(this.timestamp);\r\n                            dynamicValue.set(value.value, false);\r\n                        }\r\n                    }\r\n                });\r\n                self.spine.addEventHandler('appPing', null, function (id, data) {\r\n                    // console.log('appPing', self.lastAppPingTime, id, data);\r\n                    if (self.lastAppPingTime === null) {\r\n                        self.lastAppPingTime = new Date();\r\n                    }\r\n                    else {\r\n                        const now = new Date();\r\n                        const pingDiff = now.getTime() - self.lastAppPingTime.getTime() - 1000;\r\n                        const pingDelay = now.getTime() - data.ts * 1000;\r\n                        self.appPingDelay$.next(pingDelay);\r\n                        self.lastAppPingTime = now;\r\n                        if (pingDiff !== self.lastPingDiff) {\r\n                            self.lastPingDiff = pingDiff;\r\n                            self.appPingDiff$.next(self.lastPingDiff);\r\n                        }\r\n                    }\r\n                });\r\n                self.spine.addEventHandler('actionStarted', '', function (id) {\r\n                    console.log('as', id);\r\n                    for (const component of self.components) {\r\n                        if (component.id === id) {\r\n                            const action = component;\r\n                            action.running$.next(true);\r\n                        }\r\n                    }\r\n                });\r\n                self.spine.addEventHandler('actionDone', '', function (id) {\r\n                    console.log('ad', id);\r\n                    for (const component of self.components) {\r\n                        if (component.id === id) {\r\n                            const action = component;\r\n                            action.running$.next(false);\r\n                        }\r\n                    }\r\n                });\r\n                self.spine.addEventHandler('userLogMessage', null, function (v) {\r\n                    const messages = self.logMessages$.value;\r\n                    const newMessage = new DashboardMessageModel(this);\r\n                    messages.unshift(newMessage);\r\n                    if (messages.length > 10) {\r\n                        messages.pop();\r\n                    }\r\n                    let hasErrors = 0;\r\n                    let hasWarnings = 0;\r\n                    for (const message of messages) {\r\n                        if (message.level === 1) {\r\n                            hasErrors++;\r\n                        }\r\n                        if (message.level === 2) {\r\n                            hasWarnings++;\r\n                        }\r\n                    }\r\n                    if (hasErrors) {\r\n                        self.LogMessageState$.next(UserLogStateType.error);\r\n                    }\r\n                    else if (hasWarnings) {\r\n                        self.LogMessageState$.next(UserLogStateType.warning);\r\n                    }\r\n                    else {\r\n                        self.LogMessageState$.next(UserLogStateType.normal);\r\n                    }\r\n                    self.LogMessageCount$.next(messages.length);\r\n                    self.lastLogMessage$.next(newMessage);\r\n                    self.logMessages$.next(messages);\r\n                });\r\n            }\r\n        });\r\n    }\r\n    GetDirectory(path) {\r\n        const promise = new Promise((resolve, reject) => {\r\n            const directory = new Directory(path);\r\n            this.spine.sendQuery('files_get_dir', path, function (directoryFiles) {\r\n                directory.updateFiles(directoryFiles);\r\n                resolve(directory);\r\n            });\r\n        });\r\n        return promise;\r\n    }\r\n    GetThumbnail(path) {\r\n        const promise = new Promise((resolve, reject) => {\r\n            this.spine.sendQuery('files_get_thumbnail', path, function (thumbnail) {\r\n                resolve(thumbnail);\r\n            });\r\n        });\r\n        return promise;\r\n    }\r\n    GetFile(path) {\r\n        const promise = new Promise((resolve, reject) => {\r\n            this.spine.sendQuery('files_get_file', path, function (file) {\r\n                resolve(file);\r\n            });\r\n        });\r\n        return promise;\r\n    }\r\n    GetStream(streamId, events = []) {\r\n        return new Stream(streamId, events, this);\r\n    }\r\n    text(key, defaultValue = '') {\r\n        if (this.texts && key in this.texts) {\r\n            return this.texts[key];\r\n        }\r\n        else {\r\n            return defaultValue;\r\n        }\r\n    }\r\n    getLogMessages$() {\r\n        return this.logMessages$.asObservable();\r\n    }\r\n    getLastLogMessage$() {\r\n        return this.lastLogMessage$.asObservable();\r\n    }\r\n    getLogState$() {\r\n        return this.LogMessageState$.asObservable();\r\n    }\r\n    getLogMessageCount$() {\r\n        return this.LogMessageCount$.asObservable();\r\n    }\r\n    isAppEmpty() {\r\n        const defaultDashboard = this.getDefaultDashboard();\r\n        if (defaultDashboard) {\r\n            return defaultDashboard.isEmpty();\r\n        }\r\n        return true;\r\n    }\r\n    getComponent(id, componentType = null) {\r\n        for (const component of this.components) {\r\n            if (component.id === id && (componentType == null || component.componentType === componentType)) {\r\n                return component;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    getComponentsByType(type) {\r\n        const result = [];\r\n        for (const component of this.components) {\r\n            if (component.componentType === type) {\r\n                result.push(component);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    getDefaultDashboard() {\r\n        const dashboards = this.getComponentsByType('dashboard');\r\n        for (const dashboard of dashboards) {\r\n            if (dashboard.isDefault) {\r\n                return dashboard;\r\n            }\r\n        }\r\n        if (dashboards.length > 0) {\r\n            return dashboards[0];\r\n        }\r\n        return null;\r\n    }\r\n    connect() {\r\n        let address = null;\r\n        let protocol = 'ws';\r\n        try {\r\n            if (kerviSocketAddress) {\r\n                address = kerviSocketAddress;\r\n            }\r\n            if (socketProtocol) {\r\n                protocol = socketProtocol;\r\n            }\r\n        }\r\n        catch (e) {\r\n            // for testing with ng serve\r\n            const httpProtocol = location.protocol;\r\n            if (httpProtocol === 'https') {\r\n                protocol = 'wss';\r\n            }\r\n            const httpHost = window.location.hostname;\r\n            address = httpHost + ':9000';\r\n        }\r\n        console.log('ks', address);\r\n        this.spine = new KerviWSSpine({\r\n            address: address,\r\n            protocol: protocol,\r\n            onOpen: this.onOpen,\r\n            onClose: this.onClose,\r\n            onAuthenticate: this.onAuthenticate,\r\n            onAuthenticateFailed: this.onAuthenticateFailed,\r\n            onLogOff: this.onLogoff,\r\n            onAuthenticateStart: this.onAuthenticateStart,\r\n            onMPS: this.onMPS,\r\n            targetScope: this\r\n        });\r\n    }\r\n    connectMQ() {\r\n        console.log('ks', sessionStorage.getItem('mqc'));\r\n        if (sessionStorage.getItem('mqc')) {\r\n            this.spine = new KerviRMQSpine({\r\n                onOpen: this.onOpen,\r\n                onClose: this.onClose,\r\n                onAuthenticate: this.onAuthenticate,\r\n                onAuthenticateFailed: this.onAuthenticateFailed,\r\n                onLogOff: this.onLogoff,\r\n                onAuthenticateStart: this.onAuthenticateStart,\r\n                targetScope: this,\r\n                apiToken: JSON.parse(sessionStorage.getItem('mqc'))\r\n            });\r\n        }\r\n        else {\r\n            console.log('qmc not found in storage');\r\n        }\r\n    }\r\n    isAnonymous() {\r\n        return this.spine.options.userName === 'anonymous';\r\n    }\r\n    authenticate(userName, password) {\r\n        console.log('sa', userName, password);\r\n        this.authPromise = new Promise((resolve, reject) => {\r\n            this._resolveSelf = resolve;\r\n            this._rejectSelf = reject;\r\n        });\r\n        this.spine.authenticate(userName, password);\r\n        return this.authPromise;\r\n    }\r\n    logoff() {\r\n        this.spine.logoff();\r\n    }\r\n    onAuthenticateStart() {\r\n    }\r\n    onAuthenticate() {\r\n        this.doAuthenticate = true;\r\n        this.reset();\r\n        this._resolveSelf('ok');\r\n    }\r\n    onAuthenticateFailed() {\r\n        this._rejectSelf('error');\r\n    }\r\n    onLogoff() {\r\n        this.doAuthenticate = true;\r\n        if (this.spine.firstOnOpen) {\r\n            this.IPCReady$.next(true);\r\n        }\r\n        this.reset();\r\n    }\r\n    reset() {\r\n        this.components = [];\r\n        this.components$.next(this.components);\r\n        const messages = [];\r\n        this.LogMessageState$.next(UserLogStateType.normal);\r\n        this.LogMessageCount$.next(messages.length);\r\n        this.logMessages$.next(messages);\r\n        if (this.IPCReady$.value) {\r\n            this.connectionState$.next(ConnectionState.authenticate);\r\n        }\r\n        else {\r\n            this.connectionState$.next(ConnectionState.disconnected);\r\n        }\r\n    }\r\n    getComponentInfo(retryCount, module_load) {\r\n        const self = this;\r\n        this.spine.sendQuery('GetApplicationInfo', function (appInfo) {\r\n            console.log('app info', appInfo);\r\n            this.spine.sendQuery('getComponentInfo', function (message) {\r\n                console.log('component info', message);\r\n                self.application$.next(appInfo);\r\n                self.texts = appInfo.display.texts;\r\n                self.components = ComponentFactory.createComponents(message, self);\r\n                ComponentFactory.FixControllerReferences(self.getComponentsByType('controller'));\r\n                self.components$.next(self.components);\r\n                self.connectionState$.next(ConnectionState.connected);\r\n                if (module_load) {\r\n                    self.componentsChanged$.next(true);\r\n                }\r\n                console.log('components', self.components);\r\n            }, function () {\r\n                console.error('get component info timeout');\r\n                if (retryCount > 0) {\r\n                    self.getComponentInfo(retryCount - 1, module_load);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    onOpen(first) {\r\n        console.log('kervi service on open', this.spine.firstOnOpen, first, this);\r\n        const self = this;\r\n        this.connectionState$.next(ConnectionState.loading);\r\n        this.doAuthenticate = this.spine.doAuthenticate;\r\n        this.getComponentInfo(2, false);\r\n        if (self.spine.firstOnOpen) {\r\n            this.IPCReady$.next(true);\r\n            this.spine.addEventHandler('moduleStarted', '', function () {\r\n                console.log('module loaded', self.components);\r\n                setTimeout(function () {\r\n                    self.getComponentInfo(2, true);\r\n                }, 2000);\r\n            });\r\n            this.spine.addEventHandler('moduleStopped', '', function () {\r\n                console.log('module unloaded');\r\n                setTimeout(function () {\r\n                    console.log('module unloaded, refresh');\r\n                    self.getComponentInfo(2, true);\r\n                }, 5000);\r\n            });\r\n        }\r\n    }\r\n    onClose() {\r\n        this.reset();\r\n        console.log('ks on close');\r\n        this.IPCReady$.next(false);\r\n    }\r\n    onMPS(mps) {\r\n        this.mps$.next(mps);\r\n    }\r\n    onHeartbeat() {\r\n    }\r\n    onConnect() {\r\n    }\r\n}\r\nKerviBaseService.ɵfac = function KerviBaseService_Factory(t) { return new (t || KerviBaseService)(); };\r\nKerviBaseService.ɵprov = ɵɵdefineInjectable({ token: KerviBaseService, factory: KerviBaseService.ɵfac });\r\n/*@__PURE__*/ (function () { ɵsetClassMetadata(KerviBaseService, [{\r\n        type: Injectable\r\n    }], function () { return []; }, null); })();\n\nclass KerviJsComponent {\r\n    constructor() { }\r\n    ngOnInit() {\r\n    }\r\n}\r\nKerviJsComponent.ɵfac = function KerviJsComponent_Factory(t) { return new (t || KerviJsComponent)(); };\r\nKerviJsComponent.ɵcmp = ɵɵdefineComponent({ type: KerviJsComponent, selectors: [[\"lib-kervi-js\"]], decls: 2, vars: 0, template: function KerviJsComponent_Template(rf, ctx) { if (rf & 1) {\r\n        ɵɵelementStart(0, \"p\");\r\n        ɵɵtext(1, \" kervi-js works! \");\r\n        ɵɵelementEnd();\r\n    } }, encapsulation: 2 });\r\n/*@__PURE__*/ (function () { ɵsetClassMetadata(KerviJsComponent, [{\r\n        type: Component,\r\n        args: [{\r\n                selector: 'lib-kervi-js',\r\n                template: `\r\n    <p>\r\n      kervi-js works!\r\n    </p>\r\n  `,\r\n                styles: []\r\n            }]\r\n    }], function () { return []; }, null); })();\n\nclass KerviJsModule {\r\n}\r\nKerviJsModule.ɵmod = ɵɵdefineNgModule({ type: KerviJsModule });\r\nKerviJsModule.ɵinj = ɵɵdefineInjector({ factory: function KerviJsModule_Factory(t) { return new (t || KerviJsModule)(); }, imports: [[]] });\r\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(KerviJsModule, { declarations: [KerviJsComponent], exports: [KerviJsComponent] }); })();\r\n/*@__PURE__*/ (function () { ɵsetClassMetadata(KerviJsModule, [{\r\n        type: NgModule,\r\n        args: [{\r\n                imports: [],\r\n                declarations: [KerviJsComponent],\r\n                exports: [KerviJsComponent]\r\n            }]\r\n    }], null, null); })();\n\n/*\r\n * Public API Surface of kervi-js\r\n */\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\nexport { Action, BooleanValue, ColorValue, ConnectionState, Controller, Dashboard, DashboardBackgroundModel, DashboardLink, DashboardMessageModel, DashboardPanel, DashboardPanelComponent, DashboardPanelParameters, DashboardSizes, DateTimeValue, Directory, File, FileBase, KerviBaseService, KerviEnumOptionModel, KerviJsComponent, KerviJsModule, KerviValue, KerviValueType, NumberValue, SelectValue, Stream, StreamEvent, StringValue, UserLogStateType, ValueRange, ValueRangeType };\n//# sourceMappingURL=kervi-js.js.map\n","import { ɵɵdefineInjectable, ɵɵgetInheritedFactory, ɵsetClassMetadata, Injectable, ɵɵdefineComponent, Component, Input, ɵɵInheritDefinitionFeature, ɵɵelementStart, ɵɵtext, ɵɵelementEnd, ɵɵdirectiveInject, ɵɵdefinePipe, Pipe, ɵɵdefineNgModule, ɵɵdefineInjector, ɵɵsetNgModuleScope, NgModule, ɵɵinject, Injector } from '@angular/core';\nimport { KerviBaseService, DashboardSizes, UserLogStateType } from 'kervi-js';\nexport { ConnectionState, DashboardSizes } from 'kervi-js';\nimport { BehaviorSubject } from 'rxjs';\n\nclass NGXKerviService extends KerviBaseService {\r\n}\r\nNGXKerviService.ɵfac = function NGXKerviService_Factory(t) { return ɵNGXKerviService_BaseFactory(t || NGXKerviService); };\r\nNGXKerviService.ɵprov = ɵɵdefineInjectable({ token: NGXKerviService, factory: NGXKerviService.ɵfac });\r\nconst ɵNGXKerviService_BaseFactory = ɵɵgetInheritedFactory(NGXKerviService);\r\n/*@__PURE__*/ (function () { ɵsetClassMetadata(NGXKerviService, [{\r\n        type: Injectable\r\n    }], null, null); })();\n\nclass KerviTemplateService {\r\n    constructor() {\r\n        this.remUnit = 20;\r\n        console.log(\"kervi service constructor\");\r\n        //console.log(\"ctemplate\");\r\n        this.remUnit = parseFloat(getComputedStyle(document.documentElement).fontSize);\r\n    }\r\n    convertRemToPixels(rem) {\r\n        return rem * this.remUnit;\r\n    }\r\n    getSizeValue(value) {\r\n        if (value == null)\r\n            return \"100%\";\r\n        else if (value === \"\")\r\n            return \"100%\";\r\n        else if (isNaN(value)) {\r\n            return value;\r\n        }\r\n        else if (value > 0)\r\n            return value + \"%\";\r\n        else\r\n            return \"100%\";\r\n    }\r\n    getPixels(value, containerSize) {\r\n        //console.log(\"gps\", value, isNaN(value));\r\n        if (isNaN(value)) {\r\n            if (value.lastIndexOf(\"px\") > -1) {\r\n                var px = parseFloat(value);\r\n                return px;\r\n            }\r\n            else if (value.lastIndexOf(\"rem\") > -1) {\r\n                var rem = parseFloat(value);\r\n                var px = this.convertRemToPixels(rem);\r\n                console.log(\"remx\", rem, px);\r\n                return px;\r\n            }\r\n            else if (value.lastIndexOf(\"%\") > -1) {\r\n                var percentage = parseFloat(value) / 100.0;\r\n                return containerSize * percentage;\r\n            }\r\n        }\r\n        else\r\n            return value;\r\n    }\r\n    getStyleRuleValue(style, selector, sheet) {\r\n        var sheets = sheet != null ? [sheet] : document.styleSheets;\r\n        for (var i = 0, l = sheets.length; i < l; i++) {\r\n            var sheet = sheets[i];\r\n            if (!sheet.cssRules) {\r\n                continue;\r\n            }\r\n            for (var j = 0, k = sheet.cssRules.length; j < k; j++) {\r\n                var rule = sheet.cssRules[j];\r\n                if (rule.selectorText && rule.selectorText.split(',').indexOf(selector) !== -1) {\r\n                    return rule.style[style];\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    makeId() {\r\n        var text = \"\";\r\n        var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n        for (var i = 0; i < 5; i++)\r\n            text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n        return text;\r\n    }\r\n    getColor(colorName, cssClass) {\r\n        var styleValue = this.getStyleRuleValue(colorName, cssClass, null);\r\n        //console.log(\"sv\", cssClass,styleValue);\r\n        return styleValue;\r\n    }\r\n}\r\nKerviTemplateService.ɵfac = function KerviTemplateService_Factory(t) { return new (t || KerviTemplateService)(); };\r\nKerviTemplateService.ɵprov = ɵɵdefineInjectable({ token: KerviTemplateService, factory: KerviTemplateService.ɵfac });\r\n/*@__PURE__*/ (function () { ɵsetClassMetadata(KerviTemplateService, [{\r\n        type: Injectable\r\n    }], function () { return []; }, null); })();\n\nlet AppInjector;\r\nfunction setAppInjector(injector) {\r\n    if (AppInjector) {\r\n        // Should not happen\r\n        console.error('Programming error: AppInjector was already set');\r\n    }\r\n    else {\r\n        AppInjector = injector;\r\n    }\r\n}\n\nclass KerviDashboardComponent {\r\n    constructor() {\r\n        this.dashboardId = null;\r\n        this.dashboard = null;\r\n        this.dashboards = null;\r\n        this.dashboardSizes = null;\r\n        this.isAppEmpty = true;\r\n        this.showMenu = false;\r\n        this.dashboardPanelsHidden = false;\r\n        this.showPanelController = false;\r\n        this.cameraId = null;\r\n        this.cameraParameters = null;\r\n        this.cameraId$ = new BehaviorSubject(null);\r\n        this.authenticated = false;\r\n        this.anonymous = true;\r\n        this.showLeftPad = false;\r\n        this.leftPadXValue = null;\r\n        this.leftPadYValue = null;\r\n        this.autoCenterLeftPad = false;\r\n        this.showRightPad = false;\r\n        this.rightPadXValue = null;\r\n        this.rightPadYValue = null;\r\n        this.autoCenterRightPad = false;\r\n        this.inFullScreen = false;\r\n        this.kerviService = AppInjector.get(NGXKerviService);\r\n        var self = this;\r\n        this.kerviService.componentsChanged$.subscribe(function () {\r\n            self.loadDashboard(self.dashboardId);\r\n        });\r\n    }\r\n    logoff(event) {\r\n        this.kerviService.logoff();\r\n        event.stopPropagation();\r\n    }\r\n    loadDashboard(dashboardId) {\r\n        this.dashboardId = dashboardId;\r\n        this.dashboard = this.kerviService.getComponent(dashboardId, 'dashboard');\r\n        this.anonymous = this.kerviService.isAnonymous();\r\n        this.isAppEmpty = this.kerviService.isAppEmpty();\r\n        this.authenticated = this.kerviService.doAuthenticate;\r\n        if (this.dashboard) {\r\n            this.dashboards = this.kerviService.getComponentsByType('dashboard');\r\n            this.showMenu = (this.dashboards.length > 1 || this.kerviService.doAuthenticate);\r\n            this.showPanelController = false;\r\n            this.cameraId = null;\r\n            this.cameraParameters = null;\r\n            this.showLeftPad = false;\r\n            this.showRightPad = false;\r\n            this.dashboardPanelsHidden = false;\r\n            if (this.dashboard.backgroundPanel) {\r\n                if (this.dashboard.backgroundPanel.components.length > 0) {\r\n                    this.dashboardPanelsHidden = true;\r\n                    this.showPanelController = true;\r\n                    this.cameraId = this.dashboard.backgroundPanel.components[0].component.id;\r\n                    this.cameraId$.next(this.cameraId);\r\n                    this.cameraParameters = this.dashboard.backgroundPanel.components[0].parameters;\r\n                    console.log(\"db set cam\", this.cameraId, this.cameraParameters);\r\n                }\r\n            }\r\n            if (this.dashboard.LeftPadXPanel && this.dashboard.LeftPadXPanel.components.length || this.dashboard.LeftPadYPanel && this.dashboard.LeftPadYPanel.components.length) {\r\n                this.showLeftPad = true;\r\n                if (this.dashboard.LeftPadXPanel.components.length) {\r\n                    this.leftPadXValue = this.dashboard.LeftPadXPanel.components[0].component;\r\n                    if (this.dashboard.LeftPadXPanel.components[0].parameters.padAutoCenter)\r\n                        this.autoCenterLeftPad = true;\r\n                }\r\n                if (this.dashboard.LeftPadYPanel.components.length) {\r\n                    this.leftPadYValue = this.dashboard.LeftPadYPanel.components[0].component;\r\n                    if (this.dashboard.LeftPadXPanel.components[0].parameters.padAutoCenter)\r\n                        this.autoCenterLeftPad = true;\r\n                }\r\n            }\r\n            if (this.dashboard.RightPadXPanel && this.dashboard.RightPadXPanel.components.length || this.dashboard.RightPadYPanel && this.dashboard.RightPadYPanel.components.length) {\r\n                this.showRightPad = true;\r\n                if (this.dashboard.RightPadXPanel.components.length) {\r\n                    this.rightPadXValue = this.dashboard.RightPadXPanel.components[0].component;\r\n                    if (this.dashboard.LeftPadXPanel.components[0].parameters.padAutoCenter)\r\n                        this.autoCenterRightPad = true;\r\n                }\r\n                if (this.dashboard.RightPadYPanel.components.length) {\r\n                    this.rightPadYValue = this.dashboard.RightPadYPanel.components[0].component;\r\n                    if (this.dashboard.RightPadXPanel.components[0].parameters.padAutoCenter)\r\n                        this.autoCenterRightPad = true;\r\n                }\r\n            }\r\n            console.log(\"load db\", dashboardId, this.dashboard, this);\r\n        }\r\n    }\r\n    toggleFullScreen() {\r\n        console.log(\"fs\", this.inFullScreen);\r\n        var doc;\r\n        doc = document;\r\n        if ((doc.fullScreenElement && doc.fullScreenElement !== null)) \r\n        /*(!doc.mozFullScreen && !document.webkitIsFullScreen))*/ {\r\n            this.inFullScreen = true;\r\n            if (doc.documentElement.requestFullScreen) {\r\n                doc.documentElement.requestFullScreen();\r\n            }\r\n            else if (doc.documentElement.mozRequestFullScreen) {\r\n                doc.documentElement.mozRequestFullScreen();\r\n            } // } else if (document.documentElement.webkitRequestFullScreen) {  \r\n            //   doc.documentElement.webkitRequestFullScreen();  \r\n            // }  \r\n        }\r\n        else {\r\n            this.inFullScreen = false;\r\n            if (doc.cancelFullScreen) {\r\n                doc.cancelFullScreen();\r\n            }\r\n            else if (doc.mozCancelFullScreen) {\r\n                doc.mozCancelFullScreen();\r\n            } // } else if (document.webkitCancelFullScreen) {  \r\n            //   doc.webkitCancelFullScreen();  \r\n            // }  \r\n        }\r\n    }\r\n}\r\nKerviDashboardComponent.ɵfac = function KerviDashboardComponent_Factory(t) { return new (t || KerviDashboardComponent)(); };\r\nKerviDashboardComponent.ɵcmp = ɵɵdefineComponent({ type: KerviDashboardComponent, selectors: [[\"kervi-dashboard\"]], inputs: { cameraId: \"cameraId\", cameraParameters: \"cameraParameters\" }, decls: 0, vars: 0, template: function KerviDashboardComponent_Template(rf, ctx) { }, encapsulation: 2 });\r\n/*@__PURE__*/ (function () { ɵsetClassMetadata(KerviDashboardComponent, [{\r\n        type: Component,\r\n        args: [{\r\n                selector: 'kervi-dashboard',\r\n                template: ''\r\n            }]\r\n    }], function () { return []; }, { cameraId: [{\r\n            type: Input\r\n        }], cameraParameters: [{\r\n            type: Input\r\n        }] }); })();\n\nclass KerviDashboardPanelComponent {\r\n    constructor() {\r\n        this.panel = null;\r\n        this.inline = false;\r\n        this.inGroup = false;\r\n        this.bodyOnly = false;\r\n        this.width = \"\";\r\n        this.showHeader = false;\r\n        this.expanded = false;\r\n        this.title = null;\r\n        this.bodyComponents = [];\r\n        this.headerComponents = [];\r\n        this.footerComponents = [];\r\n        //messages: DashboardMessageModel[] = [];\r\n        //panelComponents:IComponent[] = []\r\n        this.templateService = null;\r\n        this.kerviService = null;\r\n        this.templateService = AppInjector.get(KerviTemplateService);\r\n        this.kerviService = AppInjector.get(NGXKerviService);\r\n    }\r\n    calcWidth(panel, inGroup) {\r\n        if (panel.type == \"group\") {\r\n            if (panel.parameters.width == null || panel.parameters.width == \"0\")\r\n                return \"100%\";\r\n            else\r\n                return this.templateService.getSizeValue(panel.parameters.width);\r\n        }\r\n        else\r\n            return inGroup ? \"\" : this.templateService.getSizeValue(panel.parameters.width);\r\n    }\r\n    showPanelHeader(panel) {\r\n        var hasHeaderComponents = false;\r\n        for (let component of this.panel.components) {\r\n            if (component.parameters.linkToHeader)\r\n                hasHeaderComponents = true;\r\n        }\r\n        return (panel.parameters.title != null && panel.parameters.title.length > 0) || hasHeaderComponents;\r\n    }\r\n    ngOnInitPanel() {\r\n        var self = this;\r\n        this.title = this.panel.parameters.title;\r\n        for (let component of this.panel.components) {\r\n            if (component.parameters.linkToHeader)\r\n                this.headerComponents.push(component);\r\n            else\r\n                this.bodyComponents.push(component);\r\n        }\r\n        this.showHeader = (this.panel.parameters.title != null && this.panel.parameters.title.length > 0) || (this.headerComponents.length > 0);\r\n        if (this.panel.type == \"group\") {\r\n            if (this.panel.parameters.width == null || this.panel.parameters.width == \"0\" || this.panel.parameters.width == \"\")\r\n                this.width = \"100%\";\r\n            else\r\n                this.width = this.templateService.getSizeValue(this.panel.parameters.width);\r\n        }\r\n        else\r\n            //this.width = this.inGroup ? \"100%\" : this.templateService.getSizeValue(this.panel.parameters.width);\r\n            this.width = this.templateService.getSizeValue(this.panel.parameters.width);\r\n    }\r\n}\r\nKerviDashboardPanelComponent.ɵfac = function KerviDashboardPanelComponent_Factory(t) { return new (t || KerviDashboardPanelComponent)(); };\r\nKerviDashboardPanelComponent.ɵcmp = ɵɵdefineComponent({ type: KerviDashboardPanelComponent, selectors: [[\"kervi-dashboard-panel-base\"]], inputs: { dashboardSizes: \"dashboardSizes\", panel: \"panel\", inline: \"inline\", inGroup: \"inGroup\", bodyOnly: \"bodyOnly\" }, decls: 0, vars: 0, template: function KerviDashboardPanelComponent_Template(rf, ctx) { }, encapsulation: 2 });\r\n/*@__PURE__*/ (function () { ɵsetClassMetadata(KerviDashboardPanelComponent, [{\r\n        type: Component,\r\n        args: [{\r\n                selector: 'kervi-dashboard-panel-base',\r\n                template: ''\r\n            }]\r\n    }], function () { return []; }, { dashboardSizes: [{\r\n            type: Input\r\n        }], panel: [{\r\n            type: Input\r\n        }], inline: [{\r\n            type: Input\r\n        }], inGroup: [{\r\n            type: Input\r\n        }], bodyOnly: [{\r\n            type: Input\r\n        }] }); })();\n\nclass KerviControllerPadComponent {\r\n    constructor() { }\r\n    ngOnInit() {\r\n    }\r\n}\r\nKerviControllerPadComponent.ɵfac = function KerviControllerPadComponent_Factory(t) { return new (t || KerviControllerPadComponent)(); };\r\nKerviControllerPadComponent.ɵcmp = ɵɵdefineComponent({ type: KerviControllerPadComponent, selectors: [[\"kervi-controller-pad-base\"]], inputs: { dashboardSizes: \"dashboardSizes\" }, decls: 0, vars: 0, template: function KerviControllerPadComponent_Template(rf, ctx) { }, encapsulation: 2 });\r\n/*@__PURE__*/ (function () { ɵsetClassMetadata(KerviControllerPadComponent, [{\r\n        type: Component,\r\n        args: [{\r\n                selector: 'kervi-controller-pad-base',\r\n                template: ''\r\n            }]\r\n    }], function () { return []; }, { dashboardSizes: [{\r\n            type: Input\r\n        }] }); })();\n\n// Copyright (c) 2016, Tim Wentzlau\r\nclass KerviWidgetComponent {\r\n    constructor() {\r\n        this.component = null;\r\n        this.dashboardSizes = new DashboardSizes();\r\n        this.widgetType = \"value\";\r\n        //console.log(\"cnio\",this);\r\n        this.kerviService = AppInjector.get(NGXKerviService);\r\n    }\r\n    set componentId(v) {\r\n        this.component = this.kerviService.getComponent(this.componentId);\r\n    }\r\n    ngOnInitWidget() {\r\n        if (!this.linkParameters)\r\n            this.linkParameters = this.component.ui;\r\n        if (!this.inline && this.linkParameters.inline) {\r\n            this.inline = true;\r\n        }\r\n        //console.log(\"widget\", this.component, this.linkParameters);\r\n        if (this.component.componentType == \"controller\") {\r\n            var controller = this.component;\r\n            console.log(\"widget ctrl\", controller);\r\n            if (controller.type == \"camera\")\r\n                this.widgetType = \"camera\";\r\n        }\r\n        else if (this.linkParameters.type) {\r\n            if (this.linkParameters.type.indexOf(\"gauge\") > -1) {\r\n                this.widgetType = \"gauge\";\r\n            }\r\n            else if (this.linkParameters.type == \"chart\") {\r\n                this.widgetType = \"chart\";\r\n            }\r\n        }\r\n    }\r\n}\r\nKerviWidgetComponent.ɵfac = function KerviWidgetComponent_Factory(t) { return new (t || KerviWidgetComponent)(); };\r\nKerviWidgetComponent.ɵcmp = ɵɵdefineComponent({ type: KerviWidgetComponent, selectors: [[\"kervi-widget-base\"]], inputs: { componentId: \"componentId\", component: \"component\", dashboardPanel: \"dashboardPanel\", linkParameters: \"linkParameters\", dashboardSizes: \"dashboardSizes\", inline: \"inline\" }, decls: 0, vars: 0, template: function KerviWidgetComponent_Template(rf, ctx) { }, encapsulation: 2 });\r\n/*@__PURE__*/ (function () { ɵsetClassMetadata(KerviWidgetComponent, [{\r\n        type: Component,\r\n        args: [{\r\n                selector: 'kervi-widget-base',\r\n                template: ''\r\n            }]\r\n    }], function () { return []; }, { componentId: [{\r\n            type: Input\r\n        }], component: [{\r\n            type: Input\r\n        }], dashboardPanel: [{\r\n            type: Input\r\n        }], linkParameters: [{\r\n            type: Input\r\n        }], dashboardSizes: [{\r\n            type: Input\r\n        }], inline: [{\r\n            type: Input\r\n        }] }); })();\n\n// Copyright (c) 2016, Tim Wentzlau\r\nclass KerviValueComponent {\r\n    constructor() {\r\n        this.value = null;\r\n        this.dashboardSizes = new DashboardSizes();\r\n        this.kerviService = AppInjector.get(NGXKerviService);\r\n    }\r\n    set valueId(v) {\r\n        this.value = this.kerviService.getComponent(this.valueId);\r\n    }\r\n    ngOnInitValue() {\r\n        if (!this.linkParameters)\r\n            this.linkParameters = this.value.ui;\r\n    }\r\n}\r\nKerviValueComponent.ɵfac = function KerviValueComponent_Factory(t) { return new (t || KerviValueComponent)(); };\r\nKerviValueComponent.ɵcmp = ɵɵdefineComponent({ type: KerviValueComponent, selectors: [[\"kervi-value-base\"]], inputs: { valueId: \"valueId\", value: \"value\", linkParameters: \"linkParameters\", dashboardSizes: \"dashboardSizes\", inline: \"inline\" }, decls: 0, vars: 0, template: function KerviValueComponent_Template(rf, ctx) { }, encapsulation: 2 });\r\n/*@__PURE__*/ (function () { ɵsetClassMetadata(KerviValueComponent, [{\r\n        type: Component,\r\n        args: [{\r\n                selector: 'kervi-value-base',\r\n                template: ''\r\n            }]\r\n    }], function () { return []; }, { valueId: [{\r\n            type: Input\r\n        }], value: [{\r\n            type: Input\r\n        }], linkParameters: [{\r\n            type: Input\r\n        }], dashboardSizes: [{\r\n            type: Input\r\n        }], inline: [{\r\n            type: Input\r\n        }] }); })();\n\n// Copyright (c) 2016, Tim Wentzlau\r\nclass KerviNumberComponent extends KerviValueComponent {\r\n    constructor() {\r\n        super();\r\n        this.numberFormat = \"1.2-2\";\r\n        this.displayValue = 0;\r\n        this.displayUnit = \"\";\r\n        this.displayType = \"\";\r\n        this.currentIcon = null;\r\n    }\r\n    setKerviValue(value) {\r\n        this.value.set(value);\r\n    }\r\n    ngOnInitNumber() {\r\n        this.ngOnInitValue();\r\n        var self = this;\r\n        this.numberFormat = this.linkParameters.minIntegerDigits + \".\" + this.linkParameters.minFractionDigits + \"-\" + this.linkParameters.maxFractionDigits;\r\n        if (!this.linkParameters.valueIcon)\r\n            this.currentIcon = null;\r\n        else if (typeof (this.linkParameters.valueIcon) == \"string\")\r\n            this.currentIcon = this.linkParameters.valueIcon;\r\n        else {\r\n            this.value.value$.subscribe(function (v) {\r\n                for (let iconSection of self.linkParameters.valueIcon) {\r\n                    if (v >= iconSection.range[0] && v <= iconSection.range[1]) {\r\n                        self.currentIcon = iconSection.icon;\r\n                        break;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if (!this.inline && this.linkParameters.inline) {\r\n            this.inline = true;\r\n        }\r\n        else if (!this.inline && this.linkParameters.size > 0) {\r\n            this.inline = true;\r\n        }\r\n    }\r\n}\r\nKerviNumberComponent.ɵfac = function KerviNumberComponent_Factory(t) { return new (t || KerviNumberComponent)(); };\r\nKerviNumberComponent.ɵcmp = ɵɵdefineComponent({ type: KerviNumberComponent, selectors: [[\"kervi-value-number-base\"]], features: [ɵɵInheritDefinitionFeature], decls: 0, vars: 0, template: function KerviNumberComponent_Template(rf, ctx) { }, encapsulation: 2 });\r\n/*@__PURE__*/ (function () { ɵsetClassMetadata(KerviNumberComponent, [{\r\n        type: Component,\r\n        args: [{\r\n                selector: 'kervi-value-number-base',\r\n                template: ''\r\n            }]\r\n    }], function () { return []; }, null); })();\n\n// Copyright (c) 2016, Tim Wentzlau\r\nclass KerviBooleanComponent extends KerviValueComponent {\r\n    constructor() {\r\n        super();\r\n        this.displayType = \"switch\";\r\n    }\r\n    setKerviValue(value) {\r\n        this.value.set(value);\r\n    }\r\n    ngOnInitBoolean() {\r\n        this.ngOnInitValue();\r\n        var self = this;\r\n        if (this.linkParameters.type) {\r\n            this.displayType = this.linkParameters.type;\r\n        }\r\n        if (!this.inline && this.linkParameters.inline) {\r\n            this.inline = true;\r\n        }\r\n        else if (!this.inline && this.linkParameters.size > 0) {\r\n            this.inline = true;\r\n        }\r\n    }\r\n}\r\nKerviBooleanComponent.ɵfac = function KerviBooleanComponent_Factory(t) { return new (t || KerviBooleanComponent)(); };\r\nKerviBooleanComponent.ɵcmp = ɵɵdefineComponent({ type: KerviBooleanComponent, selectors: [[\"kervi-value-boolean-base\"]], features: [ɵɵInheritDefinitionFeature], decls: 0, vars: 0, template: function KerviBooleanComponent_Template(rf, ctx) { }, encapsulation: 2 });\r\n/*@__PURE__*/ (function () { ɵsetClassMetadata(KerviBooleanComponent, [{\r\n        type: Component,\r\n        args: [{\r\n                selector: 'kervi-value-boolean-base',\r\n                template: ''\r\n            }]\r\n    }], function () { return []; }, null); })();\n\n// Copyright (c) 2016, Tim Wentzlau\r\nclass KerviActionComponent {\r\n    constructor() {\r\n        this.action = null;\r\n        this.linkParameters = null;\r\n        this.inline = false;\r\n        this.dashboardSizes = new DashboardSizes();\r\n        this.state = new BehaviorSubject(false);\r\n        this.displayType = 'switch';\r\n        this.kerviService = AppInjector.get(NGXKerviService);\r\n    }\r\n    ngOnInitAction() {\r\n        var self = this;\r\n        if (!this.linkParameters)\r\n            this.linkParameters = this.action.ui;\r\n        if (this.linkParameters.displayType) {\r\n            this.displayType = this.linkParameters.displayType;\r\n        }\r\n        if (!this.inline && this.linkParameters.inline) {\r\n            this.inline = true;\r\n        }\r\n        self.state.next(this.action.running$.value);\r\n        this.action.running$.subscribe(function (v) {\r\n            console.log(\"ar\", self.action.id, v);\r\n            self.state.next(v);\r\n        });\r\n    }\r\n    setActionState(value) {\r\n        if (value)\r\n            this.action.run(this.linkParameters.actionParameters);\r\n        else\r\n            this.action.interrupt(this.linkParameters.interruptParameters);\r\n    }\r\n}\r\nKerviActionComponent.ɵfac = function KerviActionComponent_Factory(t) { return new (t || KerviActionComponent)(); };\r\nKerviActionComponent.ɵcmp = ɵɵdefineComponent({ type: KerviActionComponent, selectors: [[\"kervi-action-base\"]], inputs: { action: \"action\", linkParameters: \"linkParameters\", inline: \"inline\", dashboardSizes: \"dashboardSizes\" }, decls: 0, vars: 0, template: function KerviActionComponent_Template(rf, ctx) { }, encapsulation: 2 });\r\n/*@__PURE__*/ (function () { ɵsetClassMetadata(KerviActionComponent, [{\r\n        type: Component,\r\n        args: [{\r\n                selector: 'kervi-action-base',\r\n                template: '',\r\n                styleUrls: [],\r\n            }]\r\n    }], function () { return []; }, { action: [{\r\n            type: Input\r\n        }], linkParameters: [{\r\n            type: Input\r\n        }], inline: [{\r\n            type: Input\r\n        }], dashboardSizes: [{\r\n            type: Input\r\n        }] }); })();\n\n// Copyright (c) 2016, Tim Wentzlau\r\nclass KerviCameraComponent {\r\n    constructor() {\r\n        this.streamObservers = [];\r\n        this.linkParameters = null;\r\n        this.inline = false;\r\n        this.dashboardSizes = new DashboardSizes();\r\n        this.isBackground = false;\r\n        const self = this;\r\n        this.kerviService = AppInjector.get(NGXKerviService);\r\n    }\r\n    set cameraId(id) {\r\n        console.log('setcamid', id);\r\n        this.camera = this.kerviService.getComponent(id);\r\n    }\r\n    set camera(v) {\r\n        console.log('setcam', v);\r\n        this.cam = v;\r\n        if (v) {\r\n            for (let i of v.outputs) {\r\n                if (i.id.endsWith('.pan')) {\r\n                    this.pan = i;\r\n                }\r\n                else if (i.id.endsWith('.tilt')) {\r\n                    this.tilt = i;\r\n                }\r\n            }\r\n            this.cameraType = v.ui.type;\r\n            if (this.cameraType === 'frame') {\r\n                if (v.ui.source) {\r\n                    this.cameraSource = this.cam.id;\r\n                }\r\n                this.cameraSource = this.cam.id;\r\n            }\r\n            this.updateStreamObservers();\r\n        }\r\n    }\r\n    get camera() { return this.cam; }\r\n    updateStreamObservers() {\r\n        const streamObservers = [];\r\n        const controllers = this.kerviService.getComponentsByType('controller');\r\n        for (let controller of controllers) {\r\n            if (controller.type === 'stream_observer') {\r\n                if (controller.ui.sourceStream === this.cameraSource) {\r\n                    streamObservers.push(controller);\r\n                }\r\n            }\r\n        }\r\n        this.streamObservers = streamObservers;\r\n        if (this.selectedSource !== this.cameraSource) {\r\n            this.selectedSource = this.cameraSource;\r\n        }\r\n    }\r\n    setPan(v) {\r\n        this.pan.set(v);\r\n    }\r\n    setTilt(v) {\r\n        this.tilt.set(v);\r\n    }\r\n    ngOnInitCamera() {\r\n        console.log('ngi cam', this.camera.id);\r\n        const self = this;\r\n        if (!this.linkParameters) {\r\n            this.linkParameters = this.camera.ui;\r\n        }\r\n        if (!this.inline && this.linkParameters.inline) {\r\n            this.inline = true;\r\n        }\r\n        this.kerviService.componentsChanged$.subscribe(function () {\r\n            self.updateStreamObservers();\r\n        });\r\n        this.updateStreamObservers();\r\n        this.selectedSource = this.cameraSource;\r\n    }\r\n    changeSource(source) {\r\n        console.log('cs', source);\r\n        this.selectedSource = source;\r\n    }\r\n}\r\nKerviCameraComponent.ɵfac = function KerviCameraComponent_Factory(t) { return new (t || KerviCameraComponent)(); };\r\nKerviCameraComponent.ɵcmp = ɵɵdefineComponent({ type: KerviCameraComponent, selectors: [[\"kervi-camera-base\"]], inputs: { streamObservers: \"streamObservers\", selectedSource: \"selectedSource\", cameraId: \"cameraId\", camera: \"camera\", linkParameters: \"linkParameters\", inline: \"inline\", dashboardSizes: \"dashboardSizes\", isBackground: \"isBackground\" }, decls: 0, vars: 0, template: function KerviCameraComponent_Template(rf, ctx) { }, encapsulation: 2 });\r\n/*@__PURE__*/ (function () { ɵsetClassMetadata(KerviCameraComponent, [{\r\n        type: Component,\r\n        args: [{\r\n                selector: 'kervi-camera-base',\r\n                template: '',\r\n                styleUrls: [],\r\n            }]\r\n    }], function () { return []; }, { streamObservers: [{\r\n            type: Input\r\n        }], selectedSource: [{\r\n            type: Input\r\n        }], cameraId: [{\r\n            type: Input\r\n        }], camera: [{\r\n            type: Input\r\n        }], linkParameters: [{\r\n            type: Input\r\n        }], inline: [{\r\n            type: Input\r\n        }], dashboardSizes: [{\r\n            type: Input\r\n        }], isBackground: [{\r\n            type: Input\r\n        }] }); })();\n\n// Copyright (c) 2016, Tim Wentzlau\r\nclass KerviColorComponent extends KerviValueComponent {\r\n    constructor() {\r\n        super();\r\n        this.displayType = \"button\";\r\n    }\r\n    setKerviValue(value) {\r\n        this.value.set(value);\r\n    }\r\n    ngOnInitColor() {\r\n        this.ngOnInitValue();\r\n        var self = this;\r\n        if (this.linkParameters.type) {\r\n            this.displayType = this.linkParameters.type;\r\n        }\r\n        if (!this.inline && this.linkParameters.inline) {\r\n            this.inline = true;\r\n        }\r\n        else if (!this.inline && this.linkParameters.size > 0) {\r\n            this.inline = true;\r\n        }\r\n    }\r\n}\r\nKerviColorComponent.ɵfac = function KerviColorComponent_Factory(t) { return new (t || KerviColorComponent)(); };\r\nKerviColorComponent.ɵcmp = ɵɵdefineComponent({ type: KerviColorComponent, selectors: [[\"kervi-value-color-base\"]], features: [ɵɵInheritDefinitionFeature], decls: 0, vars: 0, template: function KerviColorComponent_Template(rf, ctx) { }, encapsulation: 2 });\r\n/*@__PURE__*/ (function () { ɵsetClassMetadata(KerviColorComponent, [{\r\n        type: Component,\r\n        args: [{\r\n                selector: 'kervi-value-color-base',\r\n                template: ''\r\n            }]\r\n    }], function () { return []; }, null); })();\n\n// Copyright (c) 2016, Tim Wentzlau\r\nclass KerviDateTimeComponent extends KerviValueComponent {\r\n    constructor() {\r\n        super();\r\n        this.displayType = \"datetime\";\r\n    }\r\n    setKerviValue(value) {\r\n        this.value.set(value);\r\n    }\r\n    ngOnInitDateTime() {\r\n        this.ngOnInitValue();\r\n        var self = this;\r\n        if (this.linkParameters.type) {\r\n            this.displayType = this.linkParameters.type;\r\n        }\r\n        if (!this.inline && this.linkParameters.inline) {\r\n            this.inline = true;\r\n        }\r\n        if (self.linkParameters.type == \"time\")\r\n            this.dateTimeFormat = this.kerviService.application$.value.display.unit_system.datetime.time;\r\n        else if (self.linkParameters.type == \"date\")\r\n            this.dateTimeFormat = self.kerviService.application$.value.display.unit_system.datetime.date;\r\n        else\r\n            this.dateTimeFormat = this.kerviService.application$.value.display.unit_system.datetime.datetime;\r\n    }\r\n}\r\nKerviDateTimeComponent.ɵfac = function KerviDateTimeComponent_Factory(t) { return new (t || KerviDateTimeComponent)(); };\r\nKerviDateTimeComponent.ɵcmp = ɵɵdefineComponent({ type: KerviDateTimeComponent, selectors: [[\"kervi-value-datetime-base\"]], features: [ɵɵInheritDefinitionFeature], decls: 0, vars: 0, template: function KerviDateTimeComponent_Template(rf, ctx) { }, encapsulation: 2 });\r\n/*@__PURE__*/ (function () { ɵsetClassMetadata(KerviDateTimeComponent, [{\r\n        type: Component,\r\n        args: [{\r\n                selector: 'kervi-value-datetime-base',\r\n                template: ''\r\n            }]\r\n    }], function () { return []; }, null); })();\n\n// Copyright (c) 2016, Tim Wentzlau\r\nclass KerviStringComponent extends KerviValueComponent {\r\n    constructor() {\r\n        super();\r\n        this.displayType = \"\";\r\n    }\r\n    setKerviValue(value) {\r\n        this.value.set(value);\r\n    }\r\n    ngOnInitString() {\r\n        this.ngOnInitValue();\r\n        var self = this;\r\n        if (this.linkParameters.type) {\r\n            this.displayType = this.linkParameters.type;\r\n        }\r\n        if (!this.inline && this.linkParameters.inline) {\r\n            this.inline = true;\r\n        }\r\n    }\r\n}\r\nKerviStringComponent.ɵfac = function KerviStringComponent_Factory(t) { return new (t || KerviStringComponent)(); };\r\nKerviStringComponent.ɵcmp = ɵɵdefineComponent({ type: KerviStringComponent, selectors: [[\"kervi-value-string-base\"]], features: [ɵɵInheritDefinitionFeature], decls: 0, vars: 0, template: function KerviStringComponent_Template(rf, ctx) { }, encapsulation: 2 });\r\n/*@__PURE__*/ (function () { ɵsetClassMetadata(KerviStringComponent, [{\r\n        type: Component,\r\n        args: [{\r\n                selector: 'kervi-value-string-base',\r\n                template: ''\r\n            }]\r\n    }], function () { return []; }, null); })();\n\n// Copyright (c) 2016, Tim Wentzlau\r\nclass KerviUserLogComponent {\r\n    constructor() {\r\n        this.logLength = 10;\r\n        this.linkParameters = null;\r\n        this.inline = false;\r\n        this.dashboardSizes = new DashboardSizes();\r\n        this.lastMessage$ = null;\r\n        this.messages$ = null;\r\n        this.messageCount$ = null;\r\n        this.logState$ = null;\r\n        this.messageCount = 0;\r\n        this.UserLogState = UserLogStateType.normal;\r\n        this.kerviService = AppInjector.get(NGXKerviService);\r\n        this.messages$ = this.kerviService.getLogMessages$();\r\n        this.lastMessage$ = this.kerviService.getLastLogMessage$();\r\n        this.messageCount$ = this.kerviService.getLogMessageCount$();\r\n        this.logState$ = this.kerviService.getLogState$();\r\n        this.messageCount$.subscribe(function (v) {\r\n            this.messageCount = v;\r\n        });\r\n    }\r\n    ngOnInitUserLog() {\r\n    }\r\n}\r\nKerviUserLogComponent.ɵfac = function KerviUserLogComponent_Factory(t) { return new (t || KerviUserLogComponent)(); };\r\nKerviUserLogComponent.ɵcmp = ɵɵdefineComponent({ type: KerviUserLogComponent, selectors: [[\"kervi-user-log-base\"]], inputs: { logLength: \"logLength\", linkParameters: \"linkParameters\", inline: \"inline\", dashboardSizes: \"dashboardSizes\" }, decls: 0, vars: 0, template: function KerviUserLogComponent_Template(rf, ctx) { }, encapsulation: 2 });\r\n/*@__PURE__*/ (function () { ɵsetClassMetadata(KerviUserLogComponent, [{\r\n        type: Component,\r\n        args: [{\r\n                selector: 'kervi-user-log-base',\r\n                template: '',\r\n                styleUrls: [],\r\n            }]\r\n    }], function () { return []; }, { logLength: [{\r\n            type: Input\r\n        }], linkParameters: [{\r\n            type: Input\r\n        }], inline: [{\r\n            type: Input\r\n        }], dashboardSizes: [{\r\n            type: Input\r\n        }] }); })();\n\nclass KerviDirectoryComponent {\r\n    constructor() {\r\n        this.path = '/';\r\n        this.directory = null;\r\n        this.kerviService = AppInjector.get(NGXKerviService);\r\n    }\r\n    loadDirectory() {\r\n        //this.directory = this.kerviService.GetDirectory(this.path);\r\n    }\r\n}\r\nKerviDirectoryComponent.ɵfac = function KerviDirectoryComponent_Factory(t) { return new (t || KerviDirectoryComponent)(); };\r\nKerviDirectoryComponent.ɵcmp = ɵɵdefineComponent({ type: KerviDirectoryComponent, selectors: [[\"kervi-directory\"]], decls: 0, vars: 0, template: function KerviDirectoryComponent_Template(rf, ctx) { }, encapsulation: 2 });\r\n/*@__PURE__*/ (function () { ɵsetClassMetadata(KerviDirectoryComponent, [{\r\n        type: Component,\r\n        args: [{\r\n                selector: 'kervi-directory',\r\n                template: ''\r\n            }]\r\n    }], function () { return []; }, null); })();\n\n// Copyright (c) 2016, Tim Wentzlau\r\nclass KerviAppHealthComponent {\r\n    constructor() {\r\n        this.linkParameters = null;\r\n        this.inline = false;\r\n        this.dashboardSizes = new DashboardSizes();\r\n        this.mps = 0;\r\n        this.pingDiff = 0;\r\n        this.pingDelay = 0;\r\n        this.kerviService = AppInjector.get(NGXKerviService);\r\n    }\r\n    ngOnInitAppHealth() {\r\n        const self = this;\r\n        this.kerviService.mps$.subscribe(function (mps) {\r\n            self.mps = mps;\r\n        });\r\n        this.kerviService.appPingDiff$.subscribe(function (diff) {\r\n            self.pingDiff = diff;\r\n        });\r\n        this.kerviService.appPingDelay$.subscribe(function (diff) {\r\n            self.pingDelay = diff;\r\n        });\r\n    }\r\n}\r\nKerviAppHealthComponent.ɵfac = function KerviAppHealthComponent_Factory(t) { return new (t || KerviAppHealthComponent)(); };\r\nKerviAppHealthComponent.ɵcmp = ɵɵdefineComponent({ type: KerviAppHealthComponent, selectors: [[\"kervi-app-health-base\"]], inputs: { linkParameters: \"linkParameters\", inline: \"inline\", dashboardSizes: \"dashboardSizes\", mps: \"mps\", pingDiff: \"pingDiff\", pingDelay: \"pingDelay\" }, decls: 0, vars: 0, template: function KerviAppHealthComponent_Template(rf, ctx) { }, encapsulation: 2 });\r\n/*@__PURE__*/ (function () { ɵsetClassMetadata(KerviAppHealthComponent, [{\r\n        type: Component,\r\n        args: [{\r\n                selector: 'kervi-app-health-base',\r\n                template: '',\r\n                styleUrls: [],\r\n            }]\r\n    }], function () { return []; }, { linkParameters: [{\r\n            type: Input\r\n        }], inline: [{\r\n            type: Input\r\n        }], dashboardSizes: [{\r\n            type: Input\r\n        }], mps: [{\r\n            type: Input\r\n        }], pingDiff: [{\r\n            type: Input\r\n        }], pingDelay: [{\r\n            type: Input\r\n        }] }); })();\n\nclass NgxKerviComponent {\r\n    constructor() { }\r\n    ngOnInit() {\r\n    }\r\n}\r\nNgxKerviComponent.ɵfac = function NgxKerviComponent_Factory(t) { return new (t || NgxKerviComponent)(); };\r\nNgxKerviComponent.ɵcmp = ɵɵdefineComponent({ type: NgxKerviComponent, selectors: [[\"lib-ngx-kervi\"]], decls: 2, vars: 0, template: function NgxKerviComponent_Template(rf, ctx) { if (rf & 1) {\r\n        ɵɵelementStart(0, \"p\");\r\n        ɵɵtext(1, \" ngx-kervi works! \");\r\n        ɵɵelementEnd();\r\n    } }, encapsulation: 2 });\r\n/*@__PURE__*/ (function () { ɵsetClassMetadata(NgxKerviComponent, [{\r\n        type: Component,\r\n        args: [{\r\n                selector: 'lib-ngx-kervi',\r\n                template: `\r\n    <p>\r\n      ngx-kervi works!\r\n    </p>\r\n  `,\r\n                styles: []\r\n            }]\r\n    }], function () { return []; }, null); })();\n\nclass TranslatePipe {\r\n    constructor(kerviService) {\r\n        this.kerviService = kerviService;\r\n    }\r\n    transform(value, args) {\r\n        return this.kerviService.text(value, value);\r\n    }\r\n}\r\nTranslatePipe.ɵfac = function TranslatePipe_Factory(t) { return new (t || TranslatePipe)(ɵɵdirectiveInject(NGXKerviService)); };\r\nTranslatePipe.ɵpipe = ɵɵdefinePipe({ name: \"translate\", type: TranslatePipe, pure: true });\r\n/*@__PURE__*/ (function () { ɵsetClassMetadata(TranslatePipe, [{\r\n        type: Pipe,\r\n        args: [{\r\n                name: 'translate'\r\n            }]\r\n    }], function () { return [{ type: NGXKerviService }]; }, null); })();\n\n// Copyright (c) 2016, Tim Wentzlau\r\nclass NGXKerviPipesModule {\r\n}\r\nNGXKerviPipesModule.ɵmod = ɵɵdefineNgModule({ type: NGXKerviPipesModule });\r\nNGXKerviPipesModule.ɵinj = ɵɵdefineInjector({ factory: function NGXKerviPipesModule_Factory(t) { return new (t || NGXKerviPipesModule)(); }, providers: [], imports: [[]] });\r\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(NGXKerviPipesModule, { declarations: [TranslatePipe], exports: [TranslatePipe] }); })();\r\n/*@__PURE__*/ (function () { ɵsetClassMetadata(NGXKerviPipesModule, [{\r\n        type: NgModule,\r\n        args: [{\r\n                imports: [],\r\n                exports: [\r\n                    TranslatePipe\r\n                ],\r\n                providers: [],\r\n                declarations: [\r\n                    TranslatePipe\r\n                ]\r\n            }]\r\n    }], null, null); })();\n\nclass NgxKerviModule {\r\n    constructor(injector) {\r\n        this.injector = injector;\r\n        setAppInjector(injector);\r\n    }\r\n}\r\nNgxKerviModule.ɵmod = ɵɵdefineNgModule({ type: NgxKerviModule });\r\nNgxKerviModule.ɵinj = ɵɵdefineInjector({ factory: function NgxKerviModule_Factory(t) { return new (t || NgxKerviModule)(ɵɵinject(Injector)); }, providers: [NGXKerviService, KerviTemplateService], imports: [[],\r\n        NGXKerviPipesModule] });\r\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵɵsetNgModuleScope(NgxKerviModule, { declarations: [NgxKerviComponent,\r\n        KerviDashboardComponent,\r\n        KerviDashboardPanelComponent,\r\n        KerviControllerPadComponent,\r\n        KerviNumberComponent,\r\n        KerviStringComponent,\r\n        KerviBooleanComponent,\r\n        KerviColorComponent,\r\n        KerviDateTimeComponent,\r\n        KerviActionComponent,\r\n        KerviValueComponent,\r\n        KerviWidgetComponent,\r\n        KerviCameraComponent,\r\n        KerviUserLogComponent,\r\n        KerviDirectoryComponent,\r\n        KerviAppHealthComponent], exports: [NgxKerviComponent,\r\n        KerviDashboardComponent,\r\n        KerviDashboardPanelComponent,\r\n        KerviControllerPadComponent,\r\n        KerviNumberComponent,\r\n        KerviWidgetComponent,\r\n        KerviStringComponent,\r\n        KerviBooleanComponent,\r\n        KerviColorComponent,\r\n        KerviDateTimeComponent,\r\n        KerviActionComponent,\r\n        KerviCameraComponent,\r\n        KerviUserLogComponent,\r\n        KerviActionComponent,\r\n        KerviAppHealthComponent,\r\n        NGXKerviPipesModule] }); })();\r\n/*@__PURE__*/ (function () { ɵsetClassMetadata(NgxKerviModule, [{\r\n        type: NgModule,\r\n        args: [{\r\n                imports: [],\r\n                declarations: [\r\n                    NgxKerviComponent,\r\n                    KerviDashboardComponent,\r\n                    KerviDashboardPanelComponent,\r\n                    KerviControllerPadComponent,\r\n                    KerviNumberComponent,\r\n                    KerviStringComponent,\r\n                    KerviBooleanComponent,\r\n                    KerviColorComponent,\r\n                    KerviDateTimeComponent,\r\n                    KerviActionComponent,\r\n                    KerviValueComponent,\r\n                    KerviWidgetComponent,\r\n                    KerviCameraComponent,\r\n                    KerviUserLogComponent,\r\n                    KerviDirectoryComponent,\r\n                    KerviAppHealthComponent\r\n                ],\r\n                providers: [NGXKerviService, KerviTemplateService],\r\n                exports: [\r\n                    NgxKerviComponent,\r\n                    KerviDashboardComponent,\r\n                    KerviDashboardPanelComponent,\r\n                    KerviControllerPadComponent,\r\n                    KerviNumberComponent,\r\n                    KerviWidgetComponent,\r\n                    KerviStringComponent,\r\n                    KerviBooleanComponent,\r\n                    KerviColorComponent,\r\n                    KerviDateTimeComponent,\r\n                    KerviActionComponent,\r\n                    KerviCameraComponent,\r\n                    KerviUserLogComponent,\r\n                    KerviActionComponent,\r\n                    KerviAppHealthComponent,\r\n                    NGXKerviPipesModule\r\n                ]\r\n            }]\r\n    }], function () { return [{ type: Injector }]; }, null); })();\n\n/*\r\n * Public API Surface of ngx-kervi\r\n */\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\nexport { AppInjector, KerviActionComponent, KerviAppHealthComponent, KerviBooleanComponent, KerviCameraComponent, KerviColorComponent, KerviControllerPadComponent, KerviDashboardComponent, KerviDashboardPanelComponent, KerviDateTimeComponent, KerviDirectoryComponent, KerviNumberComponent, KerviStringComponent, KerviTemplateService, KerviUserLogComponent, KerviWidgetComponent, NGXKerviPipesModule, NGXKerviService, NgxKerviComponent, NgxKerviModule, TranslatePipe };\n//# sourceMappingURL=ngx-kervi.js.map\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { Component, OnInit, ViewChild, TemplateRef } from '@angular/core';\r\nimport { NGXKerviService } from \"ngx-kervi\";\r\nimport { ConnectionState } from \"ngx-kervi\";\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent implements OnInit {\r\n  private currentPage=null;\r\n  \r\n  constructor (private kerviService:NGXKerviService, private router:Router, private route:ActivatedRoute){\r\n    var self = this;\r\n    \r\n    \r\n  }\r\n\r\n  ngOnInit() {\r\n    var self = this;\r\n\r\n    this.kerviService.connectionState$.subscribe(function(connectedState){\r\n      console.log(\"connected service state\",connectedState, self);\r\n      if (connectedState == ConnectionState.disconnected){\r\n        self.router.navigate(['/connect']);\r\n      }\r\n      if (connectedState == ConnectionState.loading){\r\n      }\r\n      if (connectedState == ConnectionState.authenticate){\r\n        self.router.navigate(['/authenticate']);\r\n      }\r\n      if (connectedState == ConnectionState.connected){\r\n        if (self.currentPage)\r\n          self.router.navigate([self.currentPage]);\r\n        else {\r\n          var defaultDashboard = self.kerviService.getDefaultDashboard();\r\n          self.router.navigate(['/'+defaultDashboard.componentType+'/'+defaultDashboard.id])\r\n        }\r\n      }\r\n    });\r\n\r\n    setTimeout(function(){\r\n      self.kerviService.connect();\r\n    },0)\r\n    \r\n  }\r\n}\r\n","<router-outlet>\r\n              \r\n</router-outlet>\r\n<!-- <kervi-user-messages></kervi-user-messages> -->","\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport {BrowserAnimationsModule} from '@angular/platform-browser/animations';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ReactiveFormsModule } from '@angular/forms'\r\n\r\nimport { NgZorroAntdModule, NZ_I18N, NZ_ICONS, en_US } from 'ng-zorro-antd';\r\nimport { IconDefinition } from '@ant-design/icons-angular';\r\nimport * as AllIcons from '@ant-design/icons-angular/icons'\r\nimport { registerLocaleData } from '@angular/common';\r\nimport en from '@angular/common/locales/en';\r\n\r\nimport { AppComponent } from './app.component';\r\nimport { LoginComponent } from './login/login.component';\r\nimport { ConnectComponent } from './connect/connect.component';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { DashboardComponent } from './dashboard/dashboard.component';\r\nimport { MediaComponent } from './media/media.component' ;\r\nimport { NgxKerviModule } from 'ngx-kervi';\r\nimport { NGXKerviPipesModule } from 'ngx-kervi'\r\nimport { KerviZorroModule  } from 'kervi-zorro'\r\nimport { FlexLayoutModule } from '@angular/flex-layout';\r\nimport { ImgViewerComponent } from './image-viewer/image-viewer.component'\r\n\r\n\r\nregisterLocaleData(en);\r\n\r\nconst antDesignIcons = AllIcons as {\r\n  [key: string]: IconDefinition;\r\n};\r\nconst icons: IconDefinition[] = Object.keys(antDesignIcons).map(key => antDesignIcons[key])\r\n\r\n\r\nconst ROUTES: Routes = [\r\n\r\n  { path: 'connect', component: ConnectComponent },\r\n  { path: 'authenticate', component: LoginComponent },\r\n  { path: 'dashboard/:name', component: DashboardComponent },\r\n  { path: 'media', component: MediaComponent },\r\n  {\r\n    path: '',\r\n    redirectTo: '',\r\n    pathMatch: 'full'\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    LoginComponent,\r\n    ConnectComponent,\r\n    DashboardComponent,\r\n    MediaComponent,\r\n    ImgViewerComponent\r\n  ],\r\n  imports: [\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    BrowserModule,\r\n    BrowserAnimationsModule,\r\n    NgxKerviModule,\r\n    NGXKerviPipesModule,\r\n    //KerviZorroModule,\r\n    FlexLayoutModule,\r\n    NgZorroAntdModule,\r\n    //NgxKerviComponentsModule,\r\n    RouterModule.forRoot(ROUTES)\r\n  ],\r\n  providers:[\r\n    { provide: NZ_I18N, useValue: en_US },\r\n    { provide: NZ_ICONS, useValue: icons }\r\n  ],\r\n  \r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ConnectionState } from \"ngx-kervi\";\r\nimport { NGXKerviService } from \"ngx-kervi\";\r\n@Component({\r\n  selector: 'app-connect',\r\n  templateUrl: './connect.component.html',\r\n  styleUrls: ['./connect.component.css']\r\n})\r\nexport class ConnectComponent implements OnInit {\r\n\r\n  current = 1;\r\n\r\n  constructor(private kerviService:NGXKerviService,) { \r\n    \r\n    \r\n  }\r\n\r\n  ngOnInit() {\r\n    var self = this;\r\n    this.kerviService.connectionState$.subscribe(function(connectedState){\r\n      console.log(\"connected service state\",connectedState, self);\r\n      if (connectedState == ConnectionState.disconnected){\r\n        self.current=1\r\n      }\r\n      if (connectedState == ConnectionState.loading){\r\n        self.current=2\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n","<nz-layout>\r\n    <nz-content class=\"kervi-app-initializing\">\r\n      <div nz-row>\r\n        <div nz-col nzSpan=\"12\" nzOffset=\"9\">\r\n          <nz-steps [nzCurrent]=\"current\" nzDirection=\"vertical\">\r\n            <nz-step nzTitle=\"Initializing\" nzDescription=\"&nbsp;\" nzIcon=\"setting\" ></nz-step>\r\n            <nz-step nzTitle=\"Connecting\" nzDescription=\"&nbsp;\" nzIcon=\"wifi\"></nz-step>\r\n            <nz-step nzTitle=\"Loading dashboards\" nzDescription=\"&nbsp;\" nzIcon=\"download\"></nz-step>\r\n          </nz-steps>\r\n        </div>\r\n      </div>\r\n    </nz-content>\r\n</nz-layout>\r\n","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\r\nimport { ActivatedRoute, Router} from '@angular/router';\r\nimport { KerviDashboardComponent, NGXKerviService, ConnectionState} from 'ngx-kervi'\r\ndeclare var window:any;\r\n@Component({\r\n  selector: 'app-dashboard',\r\n  templateUrl: './dashboard.component.html',\r\n  styleUrls: ['./dashboard.component.css']\r\n})\r\nexport class DashboardComponent extends KerviDashboardComponent implements OnInit {\r\n  @ViewChild(\"leftPad\") leftPad:ElementRef;\r\n  @ViewChild(\"rightPad\") rightPad:ElementRef;\r\n  private padSize=180;\r\n  private isConnected:false;\r\n  public leftPadTop:number;\r\n  public leftPadLeft:number;\r\n\r\n  public rightPadTop:number;\r\n  public rightPadLeft:number;\r\n  cameraIdx = \"\";\r\n  mediaHidden = true;\r\n\r\n  constructor(private router:Router, private activatedRoute:ActivatedRoute ) {\r\n    super();\r\n   }\r\n\r\n  ngOnInit() {\r\n    var self = this;\r\n    this.cameraId$.subscribe(function(camId){\r\n      console.log(\"db cid\", camId);\r\n      this.cameraIdx = camId;\r\n    })\r\n    this.kerviService.componentsChanged$.subscribe(function() {\r\n      console.log(\"adb changed\");\r\n      const id = self.dashboardId;\r\n      //self.loadDashboard(\"0\");\r\n      self.loadDashboard(id);\r\n      \r\n      \r\n    });\r\n\r\n    this.activatedRoute.params.subscribe(params => {\r\n      var dashboardId = params['name'];\r\n      console.log(\"dbi\", dashboardId);\r\n      this.loadDashboard(dashboardId);\r\n      \r\n      console.log(\"rid\", dashboardId);\r\n      setTimeout(() => {\r\n        var h = window.innerHeight;\r\n        var w = window.innerWidth;\r\n\r\n        self.leftPadTop = h / 2 - self.padSize/2\r\n        self.leftPadLeft = w / 4 - self.padSize/2 \r\n        \r\n        self.rightPadTop = h / 2 - self.padSize/2\r\n        self.rightPadLeft = w - w / 4 - self.padSize/2 \r\n        \r\n\r\n      }, 0);\r\n    });\r\n  }\r\n\r\n  handleMediaClose(): void {\r\n    console.log('click ok');\r\n    this.mediaHidden = true;\r\n  }\r\n\r\n}\r\n","<nz-layout *ngIf=\"dashboard\">\r\n\t<nz-header *ngIf='!isAppEmpty'>\r\n\t\t<div nz-row>\r\n\t\t\t<div nz-col nzSpan=\"6\">\t\t\r\n\t\t\t\t<ul nz-menu  nzMode=\"horizontal\" class=\"kervi-main-menu\">\r\n\t\t\t\t\t<li nz-submenu  *ngIf=\"showMenu\">\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<span title><i nz-icon nzTheme=\"twotone\" type=\"dashboard\" [nzTwotoneColor]=\"'#9fd037'\"></i> {{dashboard.name}}</span>\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t<ng-container *ngIf=\"dashboards.length > 1\">\r\n\t\t\t\t\t\t\t\t<li nz-menu-item *ngFor=\"let dashboard of dashboards\" [routerLink]=\"['/dashboard', dashboard.id]\">{{dashboard.name}}</li>\r\n\t\t\t\t\t\t\t</ng-container>\r\n\t\t\t\t\t\t\t<li *ngIf=\"authenticated && dashboards.length > 1\">\r\n\t\t\t\t\t\t\t\t<nz-divider></nz-divider>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li nz-menu-item *ngIf=\"authenticated && anonymous\" href=\"javascript: return false;\" (click)=\"logoff($event)\" ><i nz-icon type=\"login\"></i> {{('login' | translate)}}</li>\r\n\t\t\t\t\t\t\t<li nz-menu-item *ngIf=\"authenticated && !anonymous\" href=\"javascript: return false;\" (click)=\"logoff($event)\"><i nz-icon type=\"logout\"></i>{{('logout' | translate)}}</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li nz-menu-item *ngIf=\"showPanelController\">\r\n\t\t\t\t\t\t<a  (click)=\"dashboardPanelsHidden = !dashboardPanelsHidden;\">\r\n\t\t\t\t\t\t\t<i nz-icon type=\"sliders\" nzTheme=\"twotone\" [nzTwotoneColor]=\"'#9fd037'\"></i>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"kervi-sys-panel\" *ngIf=\"dashboard && dashboard.sysPanel\" nz-col nzSpan=\"18\">\r\n\t\t\t\t<kervi-dashboard-panel [dashboardSizes]=\"dashboardSizes\" [inline]=\"true\" [panel]=\"dashboard.sysPanel\" ></kervi-dashboard-panel>\r\n\t\t\t\t&nbsp;<a  (click)=\"mediaHidden = !mediaHidden;\">\r\n\t\t\t\t\t\t<i nz-icon nzType=\"folder-open\" nzTheme=\"twotone\" [nzTwotoneColor]=\"'#9fd037'\"> </i>\r\n\t\t\t\t</a>\r\n\t\t\t\t<kervi-message-button></kervi-message-button>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t</div>\r\n\t</nz-header>\r\n\t\t\r\n\t<nz-content >\r\n\r\n\t\t<ng-container *ngIf=\"isAppEmpty\">\r\n\t\t\t<div nz-row>\r\n\t\t\t\t<div nz-col nzSpan=\"12\" nzOffset=\"6\">\r\n\t\t\t\t\t<nz-alert\r\n\t\t\t\t\t\tnzType=\"error\"\r\n\t\t\t\t\t\t[nzMessage] =\"'hello_world' | translate\"\r\n\t\t\t\t\t\t[nzDescription]=\" 'empty_app' | translate\"\r\n\t\t\t\t\t\tnzShowIcon\t\r\n\t\t\t\t\t  >\r\n\t\t\t\t\t  </nz-alert>\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</ng-container>\r\n\t\t<kervi-cam-viewer *ngIf=\"cameraId\" [isBackground]=\"true\" [cameraId]=\"(cameraId$| async)\" [linkParameters]=\"cameraParameters\"></kervi-cam-viewer>\r\n\t\t<div #leftPad class=\"kervi-controller-pad\" *ngIf=\"showLeftPad\" [style.left.px]=\"leftPadLeft\" [style.top.px]=\"leftPadTop\" >\r\n\t\t\t<kervi-controller-pad [autoCenter]=\"autoCenterLeftPad\" [XValue]=\"leftPadXValue\" [YValue]=\"leftPadYValue\"></kervi-controller-pad>\r\n\t\t</div>\r\n\t\t<div #rightPad class=\"kervi-controller-pad\" *ngIf=\"showRightPad\" [style.left.px]=\"rightPadLeft\" [style.top.px]=\"rightPadTop\" >\r\n\t\t\t<kervi-controller-pad [autoCenter]=\"autoCenterRightPad\" [XValue]=\"rightPadXValue\" [YValue]=\"rightPadYValue\"></kervi-controller-pad>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"kervi-panels\" fxLayout=\" column\" fxLayout.xs=\"column\" fxLayoutGap=\"0.5%\" fxLayoutAlign=\"\"  *ngIf=\"!dashboardPanelsHidden\" style=\"\">\r\n\t\t\t<ng-container *ngFor=\"let panel of dashboard.panels\">\r\n\t\t\t\t\t<kervi-dashboard-panel [fxFlex]=\"panel.parameters.width\" fxFlex.xs=\"100%\" [dashboardSizes]=\"defaultSizes\" [panel]=\"panel\"></kervi-dashboard-panel>\r\n\t\t\t\t\r\n\t\t\t</ng-container>\r\n\t\t</div>\r\n\t</nz-content>\r\n\t<nz-footer *ngIf='!isAppEmpty'>\r\n\t\t<div nz-col nzSpan=\"8\" style=\"text-align: left\">\r\n\t\t\t<kervi-dashboard-panel [inline]=\"true\" *ngIf=\"dashboard.footerLeftPanel\" [dashboardSizes]=\"defaultSizes\" [panel]=\"dashboard.footerLeftPanel\"></kervi-dashboard-panel>\r\n\t\t</div>\r\n\t\t<div nz-col nzSpan=\"8\" style=\"text-align:center\">\r\n\t\t\t<kervi-dashboard-panel [inline]=\"true\" *ngIf=\"dashboard.footerCenterPanel\" [dashboardSizes]=\"defaultSizes\" [panel]=\"dashboard.footerCenterPanel\"></kervi-dashboard-panel>\r\n\t\t</div>\r\n\t\t<div nz-col nzSpan=\"8\"  style=\"text-align: right\">\r\n\t\t\t<kervi-dashboard-panel [inline]=\"true\" *ngIf=\"dashboard.footerRightPanel\" [dashboardSizes]=\"defaultSizes\" [panel]=\"dashboard.footerRightPanel\"></kervi-dashboard-panel>\r\n\t\t\t<button nz-button nzShape=\"round\" (mousedown)=\"toggleFullScreen()\"><i nz-icon [nzType]=\"inFullScreen ? 'fullscreen' : 'fullscreen-exit'\" title=\"{{( 'toggle_screen' | translate)}}\"></i></button>\r\n\t\t</div>\r\n\t</nz-footer>\r\n</nz-layout>\r\n\r\n<nz-modal \r\n\tnzWrapClassName=\"vertical-center-modal\"\r\n\t[(nzVisible)]=\"!mediaHidden\"\r\n\tnzTitle=\"Media\"\r\n\t(nzOnCancel)=\"handleMediaClose()\"\r\n\t\r\n>\r\n<div style=\"display:inline-block;width:100%\"> <app-media ></app-media></div>\t\r\n\r\n</nz-modal>\r\n\r\n\r\n\r\n","\r\n//based on https://github.com/LZHD/ng-picture-viewer\r\n//Copyright 2019 Tim Wentzlau\r\n// Licensed under MIT\r\nimport {\r\n    AfterViewInit,\r\n    Component,\r\n    ElementRef,\r\n    EventEmitter,\r\n    Inject,\r\n    Input,\r\n    OnDestroy,\r\n    OnInit,\r\n    Optional,\r\n    Output,\r\n    Renderer2\r\n  } from '@angular/core';\r\n  import {DOCUMENT} from '@angular/common';\r\n  import ImageViewer from 'iv-viewer';\r\n  import {FullScreenViewer} from 'iv-viewer';\r\n  import {ImgViewerConfig} from './image-viewer.config';\r\n  import {IvViewerType} from './interfaces/iv-viewer.type';\r\n  import {ImgViewerType} from './interfaces/img-viewer.type';\r\n\r\n  @Component({\r\n    selector: 'nz-picture-viewer',\r\n    templateUrl: './image-viewer.component.html',\r\n    styleUrls: ['./image-viewer.component.scss']\r\n  })\r\n  export class ImgViewerComponent implements OnInit, OnDestroy, AfterViewInit {\r\n    @Input() imgViewerClass: string;\r\n    @Input() images: string[] = [];\r\n    @Input() showOperate = true;\r\n    @Input() zoom = true;\r\n    @Input() rotate = true;\r\n    @Input() reset = true;\r\n    @Input() fullscreen = true;\r\n    @Input() download = true;\r\n    @Input() defaultName = 'download';\r\n    @Output() prevChange: EventEmitter<number> = new EventEmitter<number>();\r\n    @Output() nextChange: EventEmitter<number> = new EventEmitter<number>();\r\n    @Output() closeViewer: EventEmitter<number> = new EventEmitter();\r\n    ROTATE_ANGLE = 90;\r\n    imageViewer$: any;\r\n    fullScreenViewer$: any;\r\n    element: HTMLElement;\r\n    currentImgIndex = 1;\r\n    imgTotal = 0;\r\n    zoomValue = 100;\r\n    isVertical = false;\r\n    imgRotate = 0;\r\n    imgViewerConfig: ImgViewerConfig;\r\n    ivViewerType: IvViewerType;\r\n    imageViewerType: ImgViewerType;\r\n\r\n    constructor(\r\n      private el: ElementRef,\r\n      private renderer: Renderer2,\r\n      @Inject(DOCUMENT) private doc: Document,\r\n      @Optional() private config: ImgViewerConfig\r\n    ) {\r\n      this.element = this.el.nativeElement as HTMLElement;\r\n      this.imgViewerConfig = new ImgViewerConfig();\r\n      this.ivViewerType = this.imgViewerConfig.ivViewerType;\r\n      this.imageViewerType = this.imgViewerConfig.imageViewerType;\r\n      if (this.config && this.config.ivViewerType) {\r\n        this.ivViewerType = Object.assign(this.ivViewerType, this.config.ivViewerType);\r\n      }\r\n      if (this.config && this.config.imageViewerType) {\r\n        this.imageViewerType = Object.assign(this.imageViewerType, this.config.imageViewerType);\r\n      }\r\n    }\r\n\r\n    ngOnInit(): void {\r\n      this.imgTotal = this.images.length;\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n      this.initImgViewer();\r\n    }\r\n\r\n    zoomInImg(): void {\r\n      this.zoomValue += 10;\r\n      this.imageViewer$.zoom(this.zoomValue);\r\n    }\r\n\r\n    zoomOutImg(): void {\r\n      if (this.zoomValue === 100) {\r\n        return;\r\n      }\r\n      this.zoomValue -= 10;\r\n      if (this.zoomValue < 0) {\r\n        this.zoomValue = 0;\r\n      }\r\n      this.imageViewer$.zoom(this.zoomValue);\r\n    }\r\n\r\n    rotateImg(isClockwise: boolean): void {\r\n      this.beforeRotateImg().then((time: number) => {\r\n        if (isClockwise) {\r\n          this.imgRotate += this.ROTATE_ANGLE;\r\n        } else {\r\n          this.imgRotate -= this.ROTATE_ANGLE;\r\n        }\r\n        this.isVertical = !this.isVertical;\r\n        time <= 0 ? this.addImgRotate() : setTimeout(() => this.addImgRotate(), time);\r\n      });\r\n    }\r\n\r\n    fullscreenImg(): void {\r\n      this.beforeRotateImg().then((time: number) => {\r\n        if (time <= 0) {\r\n          this.fullScreenViewer$.show(this.images[this.currentImgIndex - 1]);\r\n          this.addImgRotate(false);\r\n        } else {\r\n          setTimeout(() => {\r\n            this.fullScreenViewer$.show(this.images[this.currentImgIndex - 1]);\r\n            this.addImgRotate(false);\r\n          }, time);\r\n        }\r\n      });\r\n    }\r\n\r\n    downloadImg(): void {\r\n      const download = this.renderer.createElement('a');\r\n      this.renderer.setAttribute(download, 'download', `${this.defaultName}-${this.currentImgIndex}`);\r\n      this.renderer.setAttribute(download, 'display', 'none');\r\n      this.renderer.setAttribute(download, 'href', this.images[this.currentImgIndex - 1]);\r\n      this.renderer.setAttribute(download, 'target', '_blank');\r\n      this.renderer.appendChild(this.element, download);\r\n      download.click();\r\n      this.renderer.removeChild(this.renderer, download);\r\n    }\r\n\r\n    prevImg(): void {\r\n      this.isVertical = false;\r\n      this.currentImgIndex--;\r\n      if (this.currentImgIndex <= 0) {\r\n        this.currentImgIndex = this.imgTotal;\r\n      }\r\n      //this.showImg();\r\n      this.prevChange.emit(this.currentImgIndex);\r\n    }\r\n\r\n    nextImg(): void {\r\n      this.isVertical = false;\r\n      this.currentImgIndex++;\r\n      if (this.currentImgIndex > this.imgTotal) {\r\n        this.currentImgIndex = 1;\r\n      }\r\n      //this.showImg();\r\n      this.nextChange.emit(this.currentImgIndex);\r\n    }\r\n\r\n    closeImageViewer(){\r\n      this.closeViewer.emit();\r\n    }\r\n\r\n    private initImgViewer(): void {\r\n      this.imageViewer$ = new ImageViewer(this.element.querySelector('.img-viewer-panel-body-content'), this.ivViewerType);\r\n      this.fullScreenViewer$ = new FullScreenViewer(this.ivViewerType);\r\n      //this.showImg();\r\n    }\r\n\r\n    private addImgRotate(isAnimation = true): void {\r\n      let scale = '';\r\n      if (this.isVertical && this.isImgOverVertical()) {\r\n        scale = `scale(${this.getScale()})`;\r\n      }\r\n      const rotate = `rotate(${this.imgRotate}deg)`;\r\n      if (isAnimation) {\r\n        this.addTransition('iv-snap-image');\r\n        this.addTransition('iv-small-image');\r\n      }\r\n      this.setImgRotate('iv-snap-image', rotate, scale);\r\n      this.setImgRotate('iv-small-image', rotate, scale);\r\n      setTimeout(() => {\r\n        if (isAnimation) {\r\n          this.removeAnimation('iv-snap-image');\r\n          this.removeAnimation('iv-small-image');\r\n        }\r\n      }, 500);\r\n    }\r\n\r\n    private async beforeRotateImg(): Promise<any> {\r\n      this.zoomValue = 100;\r\n      const time: number = this.imageViewer$._state.zoomValue - this.zoomValue;\r\n      await this.imageViewer$.resetZoom();\r\n      await this.imageViewer$.refresh();\r\n      return time === 0 ? 0 : 500;\r\n    }\r\n\r\n    private beforeShowImg(): void {\r\n      this.imgRotate = 0;\r\n      this.isVertical = false;\r\n      const currentImg = this.element.querySelector('.iv-small-image');\r\n      if (!!currentImg) {\r\n        this.renderer.removeChild(this.element, currentImg);\r\n      }\r\n      this.setStyle('iv-loader', 'visibility', 'auto');\r\n      this.setStyle('options-image-viewer', 'visibility', 'inherit');\r\n    }\r\n\r\n    showImg(): void {\r\n      this.beforeShowImg();\r\n      \r\n      this.imageViewer$.load(this.images[0]);\r\n    }\r\n\r\n    private isImgOverVertical(): boolean {\r\n      const imgViewerHeight = this.element.clientHeight;\r\n      const currentImgWidth = this.element.querySelector('.iv-small-image').clientWidth;\r\n      return imgViewerHeight < currentImgWidth + 10;\r\n    }\r\n\r\n    private getScale(): number {\r\n      const imgViewerHeight = this.element.querySelector('.img-viewer-panel-body-content').clientHeight;\r\n      const currentImgWidth = this.element.querySelector('.iv-small-image').clientWidth;\r\n      const differenceWidth = currentImgWidth - imgViewerHeight;\r\n      if (differenceWidth >= 250 && differenceWidth < 300) {\r\n        return differenceWidth / imgViewerHeight - 0.1;\r\n      } else if (differenceWidth >= 300 && differenceWidth < 400) {\r\n        return differenceWidth / imgViewerHeight - 0.15;\r\n      } else if (differenceWidth >= 400) {\r\n        return differenceWidth / imgViewerHeight - 0.32;\r\n      } else if (differenceWidth < 0) {\r\n        return 1;\r\n      }\r\n      return 0.6;\r\n    }\r\n\r\n    private addTransition(node): void {\r\n      this.setStyle(node, 'transition', '0.5s linear');\r\n    }\r\n\r\n    private removeAnimation(node): void {\r\n      this.setStyle(node, 'transition', 'auto');\r\n    }\r\n\r\n    private setImgRotate(node, roate, scale): void {\r\n      this.setStyle(node, 'transform', `${roate} ${scale}`);\r\n    }\r\n\r\n    private setStyle(node, name, value): void {\r\n      const elements = this.doc.querySelectorAll(`.${node}`);\r\n      elements.forEach(ele => this.renderer.setStyle(ele, name, value));\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n      if (!!this.imageViewer$) {\r\n        this.imageViewer$ = this.imageViewer$.destroy();\r\n      }\r\n      if (!!this.fullScreenViewer$) {\r\n        this.fullScreenViewer$ = this.fullScreenViewer$.destroy();\r\n      }\r\n    }\r\n  }\r\n","<div class=\"img-viewer {{imgViewerClass}}\">\r\n    <div class=\"img-viewer-panel\">\r\n      <div class=\"img-viewer-panel-header\">\r\n        <div nz-row>\r\n          <div nz-col nzSpan=\"3\">\r\n              <i nz-icon (click)=\"closeImageViewer()\" nzType=\"rollback\" nzTheme=\"outline\"></i>\r\n          </div>\r\n        <div nz-col nzSpan=\"21\">\r\n          <div *ngIf=\"showOperate\" class=\"img-viewer-panel-header-operation\">\r\n            <span nz-tooltip nzPlacement=\"bottom\" [nzTitle]=\"imageViewerType.zoomInToolTip\" *ngIf=\"zoom\" (click)=\"zoomInImg()\"><i nz-icon nzType=\"zoom-in\"></i></span>\r\n            <span nz-tooltip nzPlacement=\"bottom\" [nzTitle]=\"imageViewerType.zoomOutToolTip\" *ngIf=\"zoom\" (click)=\"zoomOutImg()\"><i nz-icon nzType=\"zoom-out\"></i></span>\r\n            <span nz-tooltip nzPlacement=\"bottom\" [nzTitle]=\"imageViewerType.rotateLeftToolTip\" *ngIf=\"rotate\" (click)=\"rotateImg(false)\"><i nz-icon nzType=\"undo\"></i></span>\r\n            <span nz-tooltip nzPlacement=\"bottom\" [nzTitle]=\"imageViewerType.rotateRightToolTip\" *ngIf=\"rotate\" (click)=\"rotateImg(true)\"><i nz-icon nzType=\"redo\"></i></span>\r\n            <span nz-tooltip nzPlacement=\"bottom\" [nzTitle]=\"imageViewerType.resetToolTip\" *ngIf=\"reset\" (click)=\"showImg()\"><i nz-icon nzType=\"sync\"></i></span>\r\n            <span nz-tooltip nzPlacement=\"bottom\" [nzTitle]=\"imageViewerType.fullScreenToolTip\" *ngIf=\"fullscreen\" (click)=\"fullscreenImg()\"><i nz-icon nzType=\"fullscreen\"></i></span>\r\n            <span nz-tooltip nzPlacement=\"bottom\" [nzTitle]=\"imageViewerType.downloadToolTip\" *ngIf=\"download\" (click)=\"downloadImg()\"><i nz-icon nzType=\"download\"></i></span>\r\n          </div>\r\n      </div>\r\n      </div>\r\n      </div>\r\n      <div class=\"img-viewer-panel-body\" [class.img-viewer-panel-body-has-footer]=\"images.length > 1\">\r\n        <div class=\"img-viewer-panel-body-content\">\r\n  \r\n        </div>\r\n        <span *ngIf=\"imgTotal > 1\" class=\"img-viewer-panel-body-prev\" (click)=\"prevImg()\"><i nz-icon nzType=\"left\"></i></span>\r\n        <span *ngIf=\"imgTotal > 1\" class=\"img-viewer-panel-body-next\" (click)=\"nextImg()\"><i nz-icon nzType=\"right\"></i></span>\r\n      </div>\r\n      <div *ngIf=\"imgTotal > 1\" class=\"img-viewer-panel-footer\">\r\n      {{currentImgIndex}} / {{imgTotal}}\r\n      </div>\r\n    </div>\r\n  </div>","import {IvViewerType} from './interfaces/iv-viewer.type';\r\nimport {ImgViewerType} from './interfaces/img-viewer.type';\r\n\r\nexport class ImgViewerConfig {\r\n  ivViewerType?: IvViewerType = {\r\n    zoomValue: 100,\r\n    maxZoom: 500,\r\n    snapView: false,\r\n    refreshOnResize: true,\r\n    zoomOnMouseWheel: true,\r\n  };\r\n  imageViewerType?: ImgViewerType = {\r\n    zoomInToolTip: 'Zoom in',\r\n    zoomOutToolTip: 'Zoom put',\r\n    rotateLeftToolTip: 'Rotate left',\r\n    rotateRightToolTip: 'Rotate right',\r\n    resetToolTip: 'Reset tools',\r\n    fullScreenToolTip: 'Full screen',\r\n    downloadToolTip: 'Download',\r\n  };\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators, AbstractControl } from '@angular/forms';\r\nimport { NGXKerviService } from 'ngx-kervi'\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.css']\r\n})\r\nexport class LoginComponent implements OnInit {\r\n\r\n  loginForm: FormGroup;\r\n  userName: AbstractControl;\r\n  password: AbstractControl;\r\n  invalidCredentials:boolean = false;\r\n  \r\n  \r\n  constructor(fb: FormBuilder, private kerviService:NGXKerviService) {\r\n    var self = this;\r\n    this.loginForm = fb.group({  \r\n    'userName':  ['', Validators.required],\r\n    'password':  ['', Validators.required]  \r\n    });\r\n    \r\n    this.userName = this.loginForm.controls['userName'];\r\n    this.password = this.loginForm.controls['password']; \r\n   }\r\n\r\n   submitForm(): void {\r\n     var self = this;\r\n     if (this.loginForm.valid){\r\n      console.log(\"fv\");\r\n      this.kerviService.authenticate(this.userName.value, this.password.value)\r\n      .then(function(){\r\n         console.log(\"login ok\");\r\n       }).catch(function(){\r\n         console.log(\"login error\");\r\n         self.invalidCredentials=true;\r\n       });\r\n     } else {\r\n       console.log(\"fve\");\r\n    //   // for (const i in this.loginForm.controls) {\r\n    //   //   this.loginForm.controls[i].markAsDirty();\r\n    //   //   this.loginForm.controls[i].updateValueAndValidity();\r\n    //   // }\r\n     }\r\n    \r\n  } \r\n  ngOnInit() {\r\n  }\r\n}\r\n","<nz-layout>\r\n  <nz-content class=\"kervi-app-initializing\">\r\n    <div nz-row>\r\n      <div nz-col nzSpan=\"12\" nzOffset=\"6\">\r\n        <form nz-form \r\n          [formGroup]=\"loginForm\" \r\n          (ngSubmit)=\"submitForm()\"\r\n        >\r\n            <nz-form-item>\r\n              <nz-form-control>\r\n                <nz-input-group [nzPrefix]=\"prefixUser\">\r\n                  <input formControlName=\"userName\" nz-input placeholder=\"Username\" />\r\n                </nz-input-group>\r\n                <nz-form-explain *ngIf=\"loginForm.get('userName')?.dirty && loginForm.get('userName')?.errors\"\r\n                  >Please input your username!</nz-form-explain\r\n                >\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n            <nz-form-item>\r\n              <nz-form-control>\r\n                <nz-input-group [nzPrefix]=\"prefixLock\">\r\n                  <input formControlName=\"password\" nz-input type=\"password\" placeholder=\"Password\" />\r\n                </nz-input-group>\r\n                <nz-form-explain *ngIf=\"loginForm.get('password')?.dirty && loginForm.get('password')?.errors\"\r\n                  >Please input your Password!</nz-form-explain\r\n                >\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n            <nz-form-item>\r\n              <nz-form-control>\r\n                <button nz-button nzType=\"primary\" [disabled]=\"!loginForm.valid\">Log in</button>\r\n                <nz-form-explain *ngIf=\"invalidCredentials\"\r\n                  >Invalid user name or password</nz-form-explain\r\n                >\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </form>\r\n          <ng-template #prefixUser><i nz-icon type=\"user\"></i></ng-template>\r\n          <ng-template #prefixLock><i nz-icon type=\"lock\"></i></ng-template>\r\n      </div>\r\n    </div>\r\n  </nz-content>\r\n</nz-layout>","// Copyright (c) 2019, Tim Wentzlau\r\n// Licensed under MIT\r\n\r\nimport { Component, OnInit, ViewChild, ElementRef, Input } from '@angular/core';\r\nimport { KerviDirectoryComponent } from 'ngx-kervi';\r\nimport { NzFormatEmitEvent, NzTreeNodeOptions, NzTreeComponent } from 'ng-zorro-antd';\r\nimport { ImgViewerComponent } from '../image-viewer/image-viewer.component';\r\n\r\n@Component({\r\n  selector: 'app-media',\r\n  templateUrl: './media.component.html',\r\n  styleUrls: ['./media.component.css']\r\n})\r\nexport class MediaComponent extends KerviDirectoryComponent implements OnInit {\r\n  @ViewChild('nzTreeComponent') nzTreeComponent: NzTreeComponent;\r\n  @ViewChild('imageViewer', { static: true }) imageViewer: ImgViewerComponent;\r\n  @Input() files = [\r\n\r\n  ];\r\n  showImageViewer = false;\r\n  directoryFiles = {};\r\n\r\n\r\n  @Input() nodes: NzTreeNodeOptions[] = [\r\n    { title: 'root', key: '/' }\r\n  ];\r\n\r\n  defaultExpandedKeys = [];\r\n\r\n  constructor( ) {\r\n    super();\r\n   }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  nzEvent(event: Required<NzFormatEmitEvent>): void {\r\n    console.log('trev', event);\r\n    const node = event.node;\r\n    if (event.eventName === 'click') {\r\n      this.files = [];\r\n      this.kerviService.GetDirectory(node.key).then( d => {\r\n        const files = d.files$.getValue();\r\n        for(const file of files) {\r\n          if (file.isFile){\r\n            this.kerviService.GetThumbnail(file.path).then( t =>{\r\n              this.files.push( { title: file.name, key: file.path, thumb: t});\r\n            });\r\n          }\r\n        }\r\n      });\r\n    }\r\n    if (event.eventName === 'expand') {\r\n      if (node && node.getChildren().length === 0 && node.isExpanded) {\r\n        this.kerviService.GetDirectory(node.key).then( d => {\r\n          const files = d.files$.getValue();\r\n          const dirs = [];\r\n          for(const file of files) {\r\n            if (!file.isFile) {\r\n              dirs.push({ title: file.name, key: file.path, isLeaf: false});\r\n            }\r\n          }\r\n          node.addChildren(dirs);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  showImage(filePath) {\r\n    this.showImageViewer = true;\r\n    this.imageViewer.imgTotal = this.files.length;\r\n    this.kerviService.GetFile(filePath).then( f => {\r\n      this.imageViewer.images = ['data:image/png;base64,' + f];\r\n      this.imageViewer.showImg();\r\n    });\r\n  }\r\n\r\n  nextImage(event){\r\n    console.log(\"ni\", event);\r\n    const filePath = this.files[this.imageViewer.currentImgIndex-1].key;\r\n    this.kerviService.GetFile(filePath).then( f => {\r\n      this.imageViewer.images = ['data:image/png;base64,' + f];\r\n      this.imageViewer.showImg();\r\n    });\r\n  }\r\n\r\n  closeViewer(){\r\n    this.showImageViewer = false;\r\n  }\r\n}\r\n","<div [hidden]=\"!showImageViewer\">\r\n\t<nz-picture-viewer (closeViewer)=\"closeViewer()\" (prevChange)='nextImage($event)' (nextChange)='nextImage($event)' #imageViewer></nz-picture-viewer>\r\n</div>\r\n<div [hidden]=\"showImageViewer\">\r\n\t<div style=\"max-height: 80%;overflow-y: auto; \" nz-col nzSpan=\"8\">\r\n\t\t<nz-tree [nzData]=\"nodes\" [nzExpandedKeys]=\"defaultExpandedKeys\" nzAsyncData (nzClick)=\"nzEvent($event)\" (nzExpandChange)=\"nzEvent($event)\"> </nz-tree>\r\n\t</div>\r\n\t<div style=\"min-height:40px;max-height: 300px;overflow-y: auto; border-left: 1px solid black;\" nz-col nzSpan=\"16\">\r\n\t\t\r\n\t\t<nz-empty *ngIf=\"files.length==0\" nzNotFoundContent=\"No files in folder\"></nz-empty>\r\n\t\t<div (dblclick)=\"showImage(file.key)\"  style=\"display: inline-block;margin-left:5px; margin-bottom:5px;\" *ngFor=\"let file of files\" nzHoverable >\r\n\t\t\t<img alt=\"example\" [attr.src]=\"'data:image/png;base64,' + file.thumb\" />\r\n\t\t</div>\r\n\t\t<!-- <nz-card style=\"display: inline-block;\" *ngFor=\"let file of files\" nzHoverable style=\"width:140px\" >\r\n\t\t\t<img alt=\"example\" [attr.src]=\"'data:image/png;base64,' + file.data\" />\r\n\t\t\t<ng-template #coverTemplate>\r\n\t\t\t\t\r\n\t\t\t</ng-template>\r\n\t\t</nz-card> -->\r\n\t\t\r\n\t</div>\r\n</div>\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build ---prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * In development mode, to ignore zone related error stack frames such as\r\n * `zone.run`, `zoneDelegate.invokeTask` for easier debugging, you can\r\n * import the following file, but please comment it out in production mode\r\n * because it will have performance impact when throw error\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.log(err));\r\n"],"sourceRoot":"webpack:///"}