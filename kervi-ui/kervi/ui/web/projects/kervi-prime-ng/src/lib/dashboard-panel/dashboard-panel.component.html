<!-- <p>{{panel.name}} - {{panel.type}} - {{bodyOnly}} - {{inline}} - {{panel.subPanels.length}} - {{panel.components.length}} - {{headerComponents.length}} - {{bodyComponents.length}}</p> -->
<ng-container *ngIf="!bodyOnly && panel.type=='group'">
    <div class="p-grid p-align-stretch vertical-container" style="border:solid 1px red;margin:0">
        <ng-container *ngFor="let subPanel of panel.subPanels">
            <ng-container *ngIf="subPanel.type!='group'">
                <div class="p-col">
                    <kervi-dashboard-panel [bodyOnly]="true" [inGroup]="true" [dashboardSizes]="dashboardSizes"  [panel]="subPanel"></kervi-dashboard-panel>
                </div>
            </ng-container>
            <ng-container *ngIf="subPanel.type=='group'">
                <div  class="box p-align-stretch vertical-container" style="border:1px solid blue;margin:0">
                    <kervi-dashboard-panel  [inGroup]="true" [dashboardSizes]="dashboardSizes"  [panel]="subPanel"></kervi-dashboard-panel>
                </div>
            </ng-container>
        </ng-container>
    </div>
</ng-container>

<ng-container *ngIf="!bodyOnly && !inline && panel.type!='group'">
    <kervi-dashboard-panel [bodyOnly]="true" [dashboardSizes]="dashboardSizes"  [panel]="panel"></kervi-dashboard-panel>
</ng-container>

<ng-container *ngIf="bodyOnly">
    <p-card >
        <p-header *ngIf="showHeader" >
            {{title}}
            <div *ngIf="headerComponents.length>0">
                <ng-container *ngFor="let panelComponent of headerComponents">
                    <kervi-widget [component]="panelComponent.component" [dashboardPanel]="panel" [inline]="inline"  [linkParameters]="panelComponent.parameters"></kervi-widget>
                </ng-container>
            </div>
        </p-header>
        <div style="height:100%" *ngIf="bodyComponents.length>0" >
            <ng-container *ngFor="let panelComponent of bodyComponents">
                <kervi-widget [component]="panelComponent.component" [dashboardPanel]="panel"  [inline]="inline"  [linkParameters]="panelComponent.parameters"></kervi-widget>
            </ng-container>
        </div>
    <div *ngIf="panel.parameters.userLog"  >
        <table class="table">
            <thead>
                <tr>
                    <th>&nbsp;</th>
                    <th>{{( 'time' | translate)}}</th>
                    <th>{{( 'source' | translate)}}</th>
                    <th style="width:100%">{{( 'source' | translate)}}</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let message of messages$ | async">
                    <td>
                        <span *ngIf="message.level<=3" class="alert" [ngClass]="{'text-danger': message.level==1, 'text-warning': message.level==2, 'text-normal': message.level==3}" >&#11044;</span>
                    </td>
                    <td>{{message.timestamp | date: 'HH:mm:ss'}}</td>
                    <td>{{message.sourceName}}</td>
                    <td style="white-space:nowrap; overflow:hidden;text-overflow:ellipsis; max-width: 0;" title="{{message.topic}}">{{message.topic}}</td>
                </tr>
            </tbody>
        </table>
    </div> 
</p-card>
       
</ng-container>

<ng-template [ngIf]="!bodyOnly && inline && panel.components.length>0" >
    <ng-container *ngFor="let panelComponent of panel.components" >
        <kervi-widget [component]="panelComponent.component"  [inline]="inline" [dashboardPanel]="panel"  [linkParameters]="panelComponent.parameters"></kervi-widget>
    </ng-container>
</ng-template>