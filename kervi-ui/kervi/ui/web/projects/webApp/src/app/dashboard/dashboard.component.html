<nz-layout >
	<nz-header *ngIf='!isAppEmpty'>
		<div nz-row>
			<div nz-col nzSpan="6">		
				<ul nz-menu  nzMode="horizontal" class="kervi-main-menu">
					<li nz-submenu  *ngIf="showMenu">
						
						<span title><i nz-icon nzTheme="twotone" nzType="dashboard" [nzTwotoneColor]="'#9fd037'"></i> {{dashboard.name}}</span>
						<ul>
							<ng-container *ngIf="dashboards.length > 1">
								<li nz-menu-item *ngFor="let dashboard of dashboards" [routerLink]="['/dashboard', dashboard.id]">{{dashboard.name}}</li>
							</ng-container>
							<li *ngIf="authenticated && dashboards.length > 1">
								<nz-divider></nz-divider>
							</li>
							<li nz-menu-item *ngIf="authenticated && anonymous" (click)="logoff($event)"> <i nz-icon nzType="login" nzTheme="outline"></i>  {{('login' | translate)}}</li>
							<li nz-menu-item *ngIf="authenticated && !anonymous" (click)="logoff($event)"> <i nz-icon nzType="logout"></i> {{('logout' | translate)}}</li>
						</ul>
					</li>
					<li nz-menu-item *ngIf="showPanelController">
						<a  (click)="dashboardPanelsHidden = !dashboardPanelsHidden;">
							<i nz-icon nzType="sliders" nzTheme="twotone" [nzTwotoneColor]="'#9fd037'"></i>
						</a>
					</li>
				</ul>
			</div>
			<div class="kervi-sys-panel" *ngIf="dashboard && dashboard.sysPanel" nz-col nzSpan="18">
				<kervi-dashboard-panel [dashboardSizes]="dashboardSizes" [inline]="true" [panel]="dashboard.sysPanel" ></kervi-dashboard-panel>
				&nbsp;<a  (click)="mediaHidden = !mediaHidden;">
						<i nz-icon nzType="folder-open" nzTheme="twotone" [nzTwotoneColor]="'#9fd037'"> </i>
				</a>
				<kervi-message-button></kervi-message-button>
				
			</div>
			
		</div>
	</nz-header>
		
	<nz-content>
		<ng-container *ngIf="isAppEmpty">
			<div nz-row style="height:100%" class="kervi-panels">
				<div nz-col nzSpan="12" nzOffset="6">
					<p></p>
					<nz-alert
						nzType="warning"
						[nzMessage] ="'hello_world' | translate"
						[nzDescription]=" 'empty_app' | translate"
						nzShowIcon	
					  >
					</nz-alert>
					<p></p>
				</div>
			</div>
		</ng-container>
		<kervi-cam-viewer *ngIf="cameraId" [isBackground]="true" [cameraId]="(cameraId$| async)" [linkParameters]="cameraParameters"></kervi-cam-viewer>
		<div #leftPad class="kervi-controller-pad" *ngIf="showLeftPad" [style.left.px]="0" [style.top.px]="65" [style.bottom.px]="65" [style.right.%]="66" >
			<kervi-nipple-pad [autoCenter]="autoCenterLeftPad" [XValue]="leftPadXValue" [YValue]="leftPadYValue" style="width: 100%; height: 100%;"></kervi-nipple-pad>
		</div>
		<div #rightPad class="kervi-controller-pad" *ngIf="showRightPad" [style.left.%]="66" [style.top.px]="65" [style.bottom.px]="65" [style.right.px]="0" >
			<kervi-nipple-pad [autoCenter]="autoCenterRightPad" [XValue]="rightPadXValue" [YValue]="rightPadYValue" style="width: 100%; height: 100%;"></kervi-nipple-pad>
		</div>

		<div class="kervi-panels" fxLayout=" column" fxLayout.xs="column" fxLayoutGap="0.5%" fxLayoutAlign=""  *ngIf="!dashboardPanelsHidden && !isAppEmpty" style="">
			<ng-container *ngFor="let panel of dashboard.panels">
					<kervi-dashboard-panel [fxFlex]="panel.parameters.width" fxFlex.xs="100%" [dashboardSizes]="defaultSizes" [panel]="panel"></kervi-dashboard-panel>
				
			</ng-container>
		</div>
	</nz-content>
	<nz-footer *ngIf='!isAppEmpty'>
		<div nz-row>
			<div nz-col nzSpan="8" style="text-align: left">
				<kervi-dashboard-panel [inline]="true" *ngIf="dashboard.footerLeftPanel" [dashboardSizes]="defaultSizes" [panel]="dashboard.footerLeftPanel"></kervi-dashboard-panel>
			</div>
			<div nz-col nzSpan="8" style="text-align:center">
				<kervi-dashboard-panel [inline]="true" *ngIf="dashboard.footerCenterPanel" [dashboardSizes]="defaultSizes" [panel]="dashboard.footerCenterPanel"></kervi-dashboard-panel>
			</div>
			<div nz-col nzSpan="8"  style="text-align: right">
				<kervi-dashboard-panel [inline]="true" *ngIf="dashboard.footerRightPanel" [dashboardSizes]="defaultSizes" [panel]="dashboard.footerRightPanel"></kervi-dashboard-panel>
				<button nz-button nz-type="text"  (mousedown)="toggleFullScreen()"><i nz-icon [nzType]="inFullScreen ? 'fullscreen-exit' : 'fullscreen'" title="{{( 'toggle_screen' | translate)}}"></i></button>
			</div>
	</div>
	</nz-footer>
</nz-layout>

<nz-modal 
	nzWrapClassName="vertical-center-modal"
	[(nzVisible)]="!mediaHidden"
	nzTitle="Media"
	(nzOnCancel)="handleMediaClose()"
	
>
<div style="display:inline-block;width:100%"> <app-media ></app-media></div>	

</nz-modal>



